{"version":3,"sources":["pages/index.module.css","components/app/app.module.css","images/logo.svg","images/Subtract.svg","components/modal-overlay/modal-overlay.module.css","images/done1.svg","components/ingredient-details/ingredient-details.module.css","components/order/order.module.css","components/app-header/app-header.module.css","components/order-list/order-list.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app-header/app-header.tsx","services/hooks.tsx","components/burger-ingredients/burger-ingredients.tsx","services/utils.tsx","services/api.tsx","services/actions/index.tsx","services/actions/actions.tsx","components/burger-constructor/burger-constructor.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/modal-order/modal-order.tsx","components/order/order.tsx","services/action-types/wsActionTypes.tsx","components/order/order-page.tsx","components/order-details/order-details.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient-details/ingredient-details-page.tsx","services/actions/user-actions.tsx","services/auth.tsx","components/protected-routh.tsx","pages/login.tsx","pages/register.tsx","pages/not-found.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","pages/profile.tsx","pages/profile-pages/profile-data.tsx","components/order-list/order-list.tsx","pages/profile-pages/orders-page.tsx","components/order-info/order-info.tsx","pages/feed.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/reducers.tsx","services/reducers/user-redusers.tsx","services/reducers/wsReducer.tsx","services/reducers/index.tsx","services/store.tsx","services/middleware/socketMiddleware.tsx","index.tsx","components/order-info/order-info.module.css","components/burger-constructor/burger-constructor.module.css","components/order-details/order-details.module.css","components/modal/modal.module.css","components/modal-order/modal-order.module.css"],"names":["module","exports","wrapper","wrapperProfile","wrapperButton","disabledButton","container","heading","form","input","button","containerItems","containerProfile","link","items","item","linkProfile","activeLink","textProfile","main","section","__webpack_require__","p","modalOverlay","nutritional_value","title","modalContainer","header","buttonClose","image","pageContainer","headerPage","imagePageContainer","imagePage","list","imageContainer","priceItem","name","footer","date","wrapperContent","orderNumber","list_item","logo","listItem","identification","textDate","imageItem","modal","modalText","menu","menu_item","ingredients","price_item","tab","AppHeader","_useState","useState","burger","profile","_useState2","Object","slicedToArray","isActive","setActive","onClickHendler","e","currentTarget","id","objectSpread","react_default","a","createElement","className","headerStyles","nav","react_router_dom","concat","activeClassName","onClick","to","exact","dist","type","text","src","alt","useDispatch","dispatchHook","useSelector","selectorHook","Tabs","props","current","setCurrent","ingredientsStyles","value","active","IngredientItem","location","useLocation","card","_id","_useDrag","useDrag","collect","monitor","isDrag","isDragging","dragRef","counter","filter","element","length","ref","pathname","state","background","price","count","size","BurgerIngredients","refScroll","useRef","sauceRef","mainRef","dataCards","store","ingredient","baseIngredients","selectedIngredients","isLoading","bun","sauce","onScroll","scrollDistance","sauceTop","mainTop","scrollTop","offsetTop","handleScroll","map","index","key","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","baseUrl","getPasswordRequest","_ref3","asyncToGenerator","regenerator_default","mark","_callee","email","wrap","_context","prev","next","fetch","method","mode","cache","credentials","headers","Content-Type","redirect","referrerPolicy","body","JSON","stringify","abrupt","sent","stop","_x","apply","this","arguments","setResetPasswordRequest","_ref4","_callee2","_context2","_x2","loginRequest","_ref5","_callee3","_context3","_x3","getUserRequest","_ref6","_callee4","_context4","Authorization","apdateUserDataRequest","_ref7","_callee5","_context5","_x4","apdateTokenRequest","_ref8","_callee6","_context6","localStorage","getItem","logoutRequest","_ref9","_callee7","token","_context7","_x5","setUserRequest","_ref10","_callee8","data","_context8","password","_x6","PRICE","VIEWED_INGREDIENT","VIEWED_ORDER","checkResponse","res","ok","json","Promise","reject","status","getItems","dispatch","then","catch","console","log","payload","ADD_ITEM","DELETE_ITEM","REPLACE_ITEM","MOVE_CARD","MODAL_VISIBLE","CLOSE_MODAL","sendOrder","selectCards","cardsId","cardsBun","params","setNumOrder","order","number","err","alert","numOrder","BurgerItem","typeMean","isLocked","dataCard","handleClose","thumbnail","image_large","IngredientCard","onDeleteHandler","moveCard","drag","_useDrop","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","_useDrop2","drop","orderStyles","data-handler-id","locked","BurgerConstructor","cards","sum","cardData","_useSelector","deleteItem","indexElement","_useDrop3","typeItem","elementItem","uuid","uuidv4","handleDrop","dropTarget","useEffect","forEach","toConsumableArray","useCallback","dragCard","splice","_selectedIngredients$","list_locked","list_onlocked","arr","burger_constructor_IngredientCard","accept_block","sum_block","Subtract","icon","ModalOverlay","styleModal","Modal","modalRoot","getElementById","onClose","handleEscClose","window","addEventListener","removeEventListener","ReactDOM","createPortal","react","modal_container","children","ModalOrder","useParams","orders","messages","find","el","style","OrderIngredient","Fragment","image_mobile","Order","color","useRouteMatch","path","day","now","today","setHours","valueOf","reduce","acc","otherDay","createdAt","other","num","Math","floor","getHours","getMinutes","getTimezoneOffset","Set","WS_CONNECTION_START","WS_CONNECTION_CLOSED","OrderPage","user","order_page_OrderIngredient","OrderDetails","styleOrder","numberOrder","Gif","bottomText","IngredientDetails","styleIngredient","calories","proteins","fat","carbohydrates","IngredientDetailsPage","GET_USER_SUCCESS","UPDATE_USER_SUCCESS","getUserDate","success","authToken","accessToken","indexOf","split","setItem","refreshToken","signInUser","signOutUser","removeItem","AuthContext","createContext","ProvideAuth","_ref","auth","getUser","signIn","signOut","useProvideAuth","Provider","useAuth","useContext","ProtectedRoute","rest","objectWithoutProperties","_useAuth","isUserLoaded","setUserLoaded","init","_ref2","react_router","assign","render","from","LoginPage","inputRefMail","setValue","onChange","preventDefault","defineProperty","target","login","styles","onSubmit","placeholder","error","errorText","RegisterPage","_useState3","_useState4","valuePass","setValuePass","_useState5","_useState6","valueName","setValueName","_useState7","_useState8","register","setRegister","HOME_CRUMB","url","NotFound404","history","useHistory","errorBreadcrumb","content","ForgotPasswordPage","emailReset","setEmailReset","ResetPasswordPage","passwordReset","setPasswordReset","resetPassword","links","ProfilePage","logout","ProfileDataPage","OrdersPage","disabledName","setDisabledName","valueLogin","setValueLogin","_useState9","_useState10","display","setDisplay","onClickWindow","inputRef","disabled","onIconClick","setTimeout","focus","OrderItem","left","zIndex","OrderLine","width","OrderList","OrderInfo","ordersContainer","listNumber","listFinal","listWork","total","totalToday","FeedPage","App","isIngredient","currentIngredient","setCurrentIngredient","modalVisible","viewIngredient","openModalOrder","handleCloseModal","push","modalOrder","app_header","DndProvider","backend","HTML5Backend","styleMain","burger_ingredients","burger_constructor","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","__v","viewOrder","updatedAt","isError","userState","wsConnected","rootReducer","combineReducers","action","_action$payload","_action$payload2","wsActions","wsInit","wsSendMessage","onOpen","onError","onMessage","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","wsUrl","socket","getState","WebSocket","close","onopen","event","onerror","onmessage","parse","onclose","message","send","socketMiddleware","createStore","StrictMode","es","app","contentContainer"],"mappings":"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","file":"static/js/main.697b107c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"pages_wrapper__3vSRX\",\"wrapperProfile\":\"pages_wrapperProfile__1UbGy\",\"wrapperButton\":\"pages_wrapperButton__hcqgV\",\"disabledButton\":\"pages_disabledButton__2Te3i\",\"container\":\"pages_container__1eWoI\",\"heading\":\"pages_heading__zXaIA\",\"form\":\"pages_form__1FU2A\",\"input\":\"pages_input__1Zlif\",\"button\":\"pages_button__Z48Km\",\"containerItems\":\"pages_containerItems__2-awx\",\"containerProfile\":\"pages_containerProfile__MOp1H\",\"link\":\"pages_link__1h0h2\",\"items\":\"pages_items__1ESho\",\"item\":\"pages_item__EaJhA\",\"linkProfile\":\"pages_linkProfile__2sqTl\",\"activeLink\":\"pages_activeLink__1qUjx\",\"textProfile\":\"pages_textProfile__LLL92\",\"main\":\"pages_main__1mjSH\",\"section\":\"pages_section__1vCm0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3QpfB\"};","module.exports = __webpack_public_path__ + \"static/media/logo.d956cbee.svg\";","module.exports = __webpack_public_path__ + \"static/media/Subtract.0377dc82.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modal-overlay_modalOverlay__1YLdk\"};","module.exports = __webpack_public_path__ + \"static/media/done1.889f30de.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nutritional_value\":\"ingredient-details_nutritional_value__3nu8B\",\"title\":\"ingredient-details_title__RMm1o\",\"modalContainer\":\"ingredient-details_modalContainer__cGXra\",\"header\":\"ingredient-details_header__3h84U\",\"buttonClose\":\"ingredient-details_buttonClose__2Db_V\",\"image\":\"ingredient-details_image__yr_S8\",\"pageContainer\":\"ingredient-details_pageContainer__1_Tdq\",\"headerPage\":\"ingredient-details_headerPage__2bvxi\",\"imagePageContainer\":\"ingredient-details_imagePageContainer__3gSF4\",\"imagePage\":\"ingredient-details_imagePage__23j5l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nutritional_value\":\"order_nutritional_value__1iRxy\",\"title\":\"order_title__3sub4\",\"modalContainer\":\"order_modalContainer__14L40\",\"header\":\"order_header___-f4N\",\"buttonClose\":\"order_buttonClose__VMhAf\",\"image\":\"order_image__1LgQl\",\"pageContainer\":\"order_pageContainer__3LAKK\",\"headerPage\":\"order_headerPage__1g93s\",\"imagePageContainer\":\"order_imagePageContainer__1zOmA\",\"imagePage\":\"order_imagePage__19QA3\",\"list\":\"order_list__K2QBr\",\"imageContainer\":\"order_imageContainer__2QSoO\",\"item\":\"order_item__LY6lv\",\"priceItem\":\"order_priceItem__3mBh5\",\"name\":\"order_name__1f7G4\",\"footer\":\"order_footer__3VxdE\",\"date\":\"order_date__FwTKp\",\"container\":\"order_container__g9GJz\",\"wrapperContent\":\"order_wrapperContent__2bAFs\",\"orderNumber\":\"order_orderNumber__KEB4R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__a0z39\",\"list_item\":\"app-header_list_item__-DlDY\",\"link\":\"app-header_link__nAFAo\",\"list\":\"app-header_list__1Iz7o\",\"activeLink\":\"app-header_activeLink__h7g_s\",\"logo\":\"app-header_logo__38Yu0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"order-list_section__2QetJ\",\"main\":\"order-list_main__2xtae\",\"list\":\"order-list_list__1yzSg\",\"listItem\":\"order-list_listItem__3TMBB\",\"identification\":\"order-list_identification__1XeLv\",\"textDate\":\"order-list_textDate__qb2WV\",\"link\":\"order-list_link__1HHg5\",\"imageContainer\":\"order-list_imageContainer__3dyjw\",\"imageItem\":\"order-list_imageItem__AXlMK\",\"image\":\"order-list_image__3BopV\",\"modal\":\"order-list_modal__MWrWu\",\"modalText\":\"order-list_modalText__1-kxn\",\"priceItem\":\"order-list_priceItem__1ygfQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"burger-ingredients_menu__1FVL8\",\"menu_item\":\"burger-ingredients_menu_item__3_rJ3\",\"ingredients\":\"burger-ingredients_ingredients__2hEoK\",\"list_item\":\"burger-ingredients_list_item__2XxrQ\",\"list\":\"burger-ingredients_list__4qYf_\",\"price_item\":\"burger-ingredients_price_item__ZbOly\",\"image\":\"burger-ingredients_image__1h7SU\",\"tab\":\"burger-ingredients_tab__2pdLC\",\"link\":\"burger-ingredients_link__134Lb\"};","import React, { useState } from 'react';\r\nimport headerStyles from './app-header.module.css';\r\nimport { BurgerIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ListIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport logo from '../../images/logo.svg';\r\nimport { NavLink, Link } from 'react-router-dom';\r\n\r\n\r\nfunction AppHeader() {\r\n    const [isActive, setActive] = useState({\r\n      burger: true,\r\n      list: false,\r\n      profile: false\r\n    });\r\n\r\n    const onClickHendler = (e:React.MouseEvent<HTMLAnchorElement>) => {\r\n      e.currentTarget.id === \"profile\" ? \r\n      setActive({...isActive, burger: false, list: false, profile: true}) :\r\n      e.currentTarget.id === \"list\" ? \r\n      setActive({...isActive, burger: false, list: true, profile: false}) :\r\n      setActive({...isActive, burger: true, list: false, profile: false})\r\n    }\r\n\r\n    return (\r\n      <header className={headerStyles.header}>\r\n        <nav className={headerStyles.nav}>\r\n          <ul className={headerStyles.list}>\r\n            <li className={headerStyles.list_item}>\r\n            <NavLink \r\n                id=\"burger\" \r\n                className={`pt-4 pr-5 pb-4 pl-5 ${headerStyles.link}`} \r\n                activeClassName={headerStyles.activeLink} \r\n                onClick={onClickHendler} \r\n                to='/'\r\n                exact\r\n            >\r\n                <BurgerIcon type={isActive.burger ? \"primary\" : \"secondary\"} />\r\n                <p className={`ml-2 text_type_main-default`}>\r\n                  Конструктор\r\n                </p>\r\n              </NavLink>\r\n            </li>\r\n            <li className={headerStyles.list_item}>\r\n              <NavLink \r\n                id=\"list\" \r\n                className={`pt-4 pr-5 pb-4 pl-5 ${headerStyles.link}`} \r\n                activeClassName={headerStyles.activeLink} \r\n                onClick={onClickHendler} \r\n                to='/feed'\r\n                exact\r\n              >\r\n                  <ListIcon type={isActive.list ? \"primary\" : \"secondary\"} />\r\n                  <p className={`ml-2 ${headerStyles.text} text_type_main-default`}>\r\n                    Лента заказов\r\n                  </p>\r\n              </NavLink>\r\n            </li>\r\n          </ul>   \r\n        </nav>\r\n        <Link to='/'>\r\n        <img src={logo} alt=\"logo\" className={headerStyles.logo}/>\r\n        </Link>\r\n        <NavLink \r\n          id=\"profile\" \r\n          className={`${headerStyles.link}`} \r\n          activeClassName={headerStyles.activeLink} \r\n          onClick={onClickHendler} \r\n          to='/profile'\r\n        >\r\n          <ProfileIcon type={isActive.profile ? \"primary\" : \"secondary\"}/>\r\n          <p className={`ml-2 ${headerStyles.text} text_type_main-default`}>\r\n            Личный кабинет\r\n          </p>\r\n        </NavLink>\r\n      </header>\r\n    );\r\n  };\r\n\r\nexport default AppHeader;","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook\r\n} from 'react-redux';\r\nimport { RootState } from './reducers/index';\r\nimport { AppDispatch, AppThunk } from '../utils/index';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","import React, { useState, useEffect, useRef, FunctionComponent } from 'react';\r\nimport ingredientsStyles from './burger-ingredients.module.css';\r\nimport { Counter, Tab, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { getItems } from '../../services/actions/index';\r\nimport { useDrag } from \"react-dnd\";\r\nimport { Ingredient, ILocation } from '../../utils/types';\r\n\r\ninterface IngredientProps {\r\n  onClick: (card:Ingredient) => void\r\n  card: Ingredient\r\n  ingredients: Array<Ingredient>\r\n}\r\n\r\ninterface BurgerProps {\r\n  onClick: (card:Ingredient) => void\r\n}\r\n\r\nfunction Tabs(props: {current: string, setCurrent: React.Dispatch<React.SetStateAction<string>>}) {\r\n  const {current, setCurrent} = props;\r\n  return (\r\n    <div className={ingredientsStyles.tab}>\r\n      <Tab value=\"one\" active={current === 'one'} onClick={setCurrent}>\r\n        Булки\r\n      </Tab>\r\n      <Tab value=\"two\" active={current === 'two'} onClick={setCurrent}>\r\n        Соусы\r\n      </Tab>\r\n      <Tab value=\"three\" active={current === 'three'} onClick={setCurrent}>\r\n        Начинки\r\n      </Tab>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction IngredientItem(props:IngredientProps) {\r\n  const location:ILocation = useLocation();\r\n  const {onClick, card, ingredients} = props;\r\n  const id = card._id;\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: {id},\r\n    collect: monitor => ({\r\n      isDrag: monitor.isDragging()\r\n    })\r\n  });\r\n  \r\n  \r\n  let counter = ingredients.filter((element:Ingredient) => element._id === id).length;\r\n  if (counter !== 0 && card['type'] === 'bun') {\r\n    counter += counter;\r\n  }\r\n\r\n  return (\r\n    <li \r\n      className={ingredientsStyles.list_item} \r\n      onClick={() => onClick(card)}  \r\n      ref={dragRef}\r\n    >\r\n      <Link to={{\r\n          pathname: `/ingredients/${card._id}`,\r\n          state: {background: location}\r\n      }}\r\n      className={ingredientsStyles.link}>\r\n        <img src={card.image} alt=\"icon\" className={`ml-4 mb-1 ${ingredientsStyles.image}`}/>\r\n        <p className={`${ingredientsStyles.price_item}`}> \r\n        <span className={`mr-2 text_type_digits-default`}>{card.price}</span> \r\n        <CurrencyIcon type=\"primary\" /> </p>\r\n        <h3 className={`mt-1 text_type_main-small`}>{card.name}</h3>\r\n        {counter !== 0 && \r\n          <Counter count={counter} size=\"default\" />\r\n        }\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst BurgerIngredients: FunctionComponent<BurgerProps> = (props) => {\r\n    const [current, setCurrent] = useState('one');\r\n    const refScroll = useRef<HTMLDivElement>(null);\r\n    const sauceRef = useRef<HTMLDivElement>(null);\r\n    const mainRef = useRef<HTMLDivElement>(null);\r\n    const dispatch = useDispatch();\r\n    const dataCards:Array<Ingredient> = useSelector((store) => {\r\n      return store.ingredient.baseIngredients\r\n    });\r\n    const ingredients = useSelector((store) => {\r\n      return store.ingredient.selectedIngredients\r\n    });\r\n    const isLoading = useSelector((store) => store.ingredient.isLoading);\r\n    const bun = dataCards.filter((card:Ingredient) => card.type==='bun');\r\n    const sauce = dataCards.filter((card:Ingredient) => card.type==='sauce');\r\n    const main = dataCards.filter((card:Ingredient) => card.type==='main');\r\n\r\n    const handleScroll = () => {\r\n      let scrollDistance:number = 0;\r\n      let sauceTop:number = 0;\r\n      let mainTop:number = 0;\r\n      if (refScroll && refScroll.current) {\r\n        scrollDistance = refScroll.current.scrollTop;\r\n      }\r\n      if (sauceRef && sauceRef.current) {\r\n        sauceTop = sauceRef.current.offsetTop;\r\n      }\r\n      if (mainRef && mainRef.current) {\r\n        mainTop = mainRef.current.offsetTop;\r\n      }\r\n      if (scrollDistance < sauceTop) {\r\n        setCurrent('one')\r\n      } else if (scrollDistance > sauceTop && scrollDistance < mainTop) {\r\n        setCurrent('two')\r\n      } else if (scrollDistance > mainTop) {\r\n        setCurrent('three')\r\n      }\r\n      \r\n    }\r\n\r\n\r\n\r\n    return (\r\n      <section className={`${ingredientsStyles.ingredients} section-item`}>\r\n        <h1 className={`mt-10 mb-5 text_type_main-large`}>Соберите бургер</h1>\r\n        <Tabs current={current} setCurrent={setCurrent}/>\r\n        {isLoading &&\r\n        <h3>Загрузка...</h3>}\r\n        {!isLoading &&\r\n        <div className={`mt-10 ${ingredientsStyles.menu}`} ref={refScroll} onScroll={() => handleScroll()}>\r\n          <div>\r\n            <h2 className={`${ingredientsStyles.menu_item} mb-6 text_type_main-medium`}>Булки</h2>\r\n              <ul className={`${ingredientsStyles.list} ml-4 mb-10`}>\r\n                {bun.map((card, index) => {\r\n                  return (\r\n                      <IngredientItem onClick={props.onClick} card={card} key={card._id} ingredients={ingredients}/>\r\n                  )\r\n                })}\r\n              </ul>\r\n          </div>\r\n          <div ref={sauceRef}>\r\n            <h2 className={`${ingredientsStyles.menu_item} mb-6 text_type_main-medium`}>Соусы</h2>\r\n              <ul className={`${ingredientsStyles.list} ml-4 mb-10`}>\r\n                {sauce.map((card, index) => {\r\n                  return (\r\n                  \r\n                      <IngredientItem onClick={props.onClick} card={card} key={card._id} ingredients={ingredients}/>\r\n                    \r\n                  ) \r\n                })}\r\n              </ul>\r\n          </div>\r\n          <div ref={mainRef}>\r\n            <h2 className={`${ingredientsStyles.menu_item} mb-6 text_type_main-medium`}>Начинки</h2>\r\n              <ul className={`${ingredientsStyles.list} ml-4 mb-10`}>\r\n                {main.map((card, index) => {\r\n                  return (\r\n                   \r\n                      <IngredientItem onClick={props.onClick} card={card} key={card._id} ingredients={ingredients}/>\r\n                   \r\n                  )\r\n                })}\r\n              </ul>\r\n          </div>\r\n        </div> \r\n        }\r\n      </section>\r\n    );\r\n  };\r\n\r\nexport default BurgerIngredients;","export function getCookie(name:any) {\r\n  const matches = document.cookie.match(\r\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function setCookie(name:string, value: any, props: any) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + '=' + value;\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name:string) {\r\n  setCookie(name, null, { expires: -1 });\r\n}","import { getCookie } from './utils';\r\n\r\nexport const baseUrl = 'https://norma.nomoreparties.space/api/';\r\n\r\nexport const deserializeQuery = (query:any, noQuestionMark = false) => {\r\n  const pairs = (noQuestionMark ? query : query.substring(1)).split('&');\r\n  const array = pairs.map((elem:string) => elem.split('='));\r\n  return Object.fromEntries(array);\r\n};\r\n\r\nexport const serializeQuery = (queryParams:any) =>\r\n  Object.entries(queryParams).reduce((acc, [key, value]:any, index, array) => {\r\n    if (typeof value === 'undefined') {\r\n      return acc;\r\n    }\r\n    const postfix = index === array.length - 1 ? '' : '&';\r\n    return `${acc}${encodeURIComponent(key)}=${encodeURIComponent(value)}${postfix}`;\r\n  }, '?');\r\n\r\nexport const getPasswordRequest = async (email:{email: string}) => {\r\n  return await fetch(`${baseUrl}password-reset`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: JSON.stringify(email)\r\n  });\r\n};\r\n\r\nexport const setResetPasswordRequest = async (form:{password: string, token: string}) => {\r\n  return await fetch(`${baseUrl}password-reset/reset`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: JSON.stringify(form)\r\n  });\r\n};\r\n\r\nexport const loginRequest = async (form:{email: string, password: string}) => {\r\n  return await fetch(`${baseUrl}auth/login`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: JSON.stringify(form)\r\n  });\r\n};\r\n\r\nexport const getUserRequest = async () =>\r\n  await fetch(`${baseUrl}auth/user`, {\r\n    method: 'GET',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer'\r\n  });\r\n\r\n  export const apdateUserDataRequest = async (form:{email: string, password: string, name: string}) =>\r\n  await fetch(`${baseUrl}auth/user`, {\r\n    method: 'PATCH',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: JSON.stringify(form)\r\n  });\r\n\r\n  export const apdateTokenRequest = async () =>\r\n  await fetch(`${baseUrl}auth/token`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: localStorage.getItem('refreshToken')\r\n  });\r\n\r\nexport const logoutRequest = async (token:string|null) => {\r\n  return await fetch(`${baseUrl}auth/logout`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n    body: JSON.stringify(token)\r\n  });\r\n};\r\n\r\nexport const setUserRequest = async (data:{email: string, password: string, name: string}) => {\r\n  return await fetch(`${baseUrl}auth/register`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n     },\r\n    body: JSON.stringify({\r\n    \"email\": data.email, \r\n    \"password\": data.password, \r\n    \"name\": data.name}),\r\n  })\r\n};","export const GET_ITEMS_REQUEST: 'GET_ITEMS_REQUEST' = 'GET_ITEMS_REQUEST';\r\nexport const GET_ITEMS_SUCCESS: 'GET_ITEMS_SUCCESS' = 'GET_ITEMS_SUCCESS';\r\nexport const GET_ITEMS_FAILED: 'GET_ITEMS_FAILED' = 'GET_ITEMS_FAILED';\r\nexport const COMPLETION_INGREDIENTS: 'COMPLETION_INGREDIENTS' = 'COMPLETION_INGREDIENTS';\r\nexport const PRICE: 'PRICE' = 'PRICE';\r\nexport const VIEWED_INGREDIENT: 'VIEWED_INGREDIENT' = 'VIEWED_INGREDIENT';\r\nexport const VIEWED_ORDER: 'VIEWED_ORDER' = 'VIEWED_ORDER';\r\nimport { baseUrl } from '../api';\r\nimport { Ingredient, IOrder } from '../../utils/types';\r\nimport { AppDispatch, AppThunk } from '../../utils/index';\r\n\r\nexport interface IGetItemsRequestAction {\r\n  readonly type: typeof GET_ITEMS_REQUEST;\r\n}\r\n\r\nexport interface IGetItemsSuccessAction {\r\n  readonly type: typeof GET_ITEMS_SUCCESS;\r\n  data: Array<Ingredient>;\r\n}\r\n\r\nexport interface IGetItemsFailedAction {\r\n  readonly type: typeof GET_ITEMS_FAILED;\r\n  readonly payload: string;\r\n}\r\n\r\nexport interface ICompletionIngredientsAction {\r\n  readonly type: typeof COMPLETION_INGREDIENTS;\r\n}\r\n\r\nexport interface IPriceAction {\r\n  readonly type: typeof PRICE;\r\n  readonly payload: number;\r\n}\r\n\r\nexport interface IViewedIngredientAction {\r\n  readonly type: typeof VIEWED_INGREDIENT;\r\n  readonly payload: Ingredient;\r\n}\r\n\r\nexport interface IViewedOrderAction {\r\n  readonly type: typeof VIEWED_ORDER;\r\n  readonly payload: IOrder;\r\n}\r\n\r\nexport type TCardsActions = \r\n| IGetItemsRequestAction\r\n| IGetItemsSuccessAction\r\n| IGetItemsFailedAction\r\n| ICompletionIngredientsAction\r\n| IPriceAction\r\n| IViewedIngredientAction\r\n| IViewedOrderAction;\r\n\r\n\r\n\r\nexport function checkResponse(res:Response) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n\r\nexport const getItems:AppThunk = () => {\r\n  return function(dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: GET_ITEMS_REQUEST\r\n    });\r\n    fetch(`${baseUrl}ingredients`)\r\n    .then(checkResponse)\r\n    .then(data => {\r\n      const dataCards = data;\r\n      dispatch({\r\n        type: GET_ITEMS_SUCCESS,\r\n        data: dataCards.data\r\n      });\r\n     })\r\n    .catch(e => {\r\n      console.log(e);\r\n      dispatch({\r\n        type: GET_ITEMS_FAILED,\r\n        payload: e\r\n      });\r\n    }) \r\n  }\r\n}","import { checkResponse } from './index';\r\nimport { Ingredient } from '../../utils/types';\r\nimport { baseUrl } from '../api';\r\nimport { getCookie } from '../utils';\r\nimport { AppDispatch, AppThunk } from '../../utils/index';\r\n\r\n\r\nexport const ADD_ITEM: 'ADD_ITEM' = 'ADD_ITEM';\r\nexport const DELETE_ITEM: 'DELETE_ITEM' = 'DELETE_ITEM';\r\nexport const REPLACE_ITEM: 'REPLACE_ITEM' = 'REPLACE_ITEM';\r\nexport const MOVE_CARD: 'MOVE_CARD' = 'MOVE_CARD';\r\nexport const CLEAR_INGREDIENTS: 'CLEAR_INGREDIENTS' = 'CLEAR_INGREDIENTS';\r\nexport const MODAL_VISIBLE: 'MODAL_VISIBLE' = 'MODAL_VISIBLE';\r\nexport const SET_ORDER: 'SET_ORDER' = 'SET_ORDER';\r\nexport const CLOSE_MODAL: 'CLOSE_MODAL' = 'CLOSE_MODAL';\r\n\r\nexport interface IAddItemAction {\r\n  readonly type: typeof ADD_ITEM;\r\n  readonly payload: {\r\n    card: Ingredient,\r\n    uuid: string\r\n  }\r\n}\r\n\r\nexport interface IDeleteItemAction {\r\n  readonly type: typeof DELETE_ITEM;\r\n  readonly payload: Array<Ingredient>;\r\n}\r\n\r\nexport interface IReplaceItemAction {\r\n  readonly type: typeof REPLACE_ITEM;\r\n  readonly payload: Array<Ingredient>;\r\n}\r\n\r\nexport interface IMoveCardAction {\r\n  readonly type: typeof MOVE_CARD;\r\n  readonly payload: Array<Ingredient>;\r\n}\r\n\r\nexport interface IClearIngredientsAction {\r\n  readonly type: typeof CLEAR_INGREDIENTS;\r\n}\r\n\r\nexport interface IModalVisibleAction {\r\n  readonly type: typeof MODAL_VISIBLE;\r\n}\r\n\r\nexport interface ISetOrderAction {\r\n  readonly type: typeof SET_ORDER;\r\n  readonly payload: number;\r\n}\r\n\r\nexport interface ICloseModalAction {\r\n  readonly type: typeof CLOSE_MODAL;\r\n}\r\n\r\nexport type TCostructorActions = \r\n| IAddItemAction\r\n| IDeleteItemAction\r\n| IReplaceItemAction\r\n| IMoveCardAction\r\n| IClearIngredientsAction\r\n| IModalVisibleAction\r\n| ISetOrderAction\r\n| ICloseModalAction;\r\n\r\nexport const sendOrder: AppThunk = (selectCards:ReadonlyArray<Ingredient>) => {\r\n  return function(dispatch: AppDispatch) {\r\n    const cardsId = selectCards.map((card) => card._id);\r\n    const cardsBun = selectCards.filter((card) => card.type === 'bun');\r\n    const token: string | undefined = getCookie('token');\r\n    if (cardsId.length !==0 && cardsBun.length !== 0) {\r\n    const params = {\r\n      method: 'POST',\r\n      headers: {\r\n       'Content-Type': 'application/json',\r\n       Authorization: 'Bearer ' + token\r\n      },\r\n      body: JSON.stringify({\r\n      \"ingredients\": cardsId\r\n      })\r\n    }\r\n    fetch(`http://norma.nomoreparties.space/api/orders`, params)\r\n    .then(checkResponse)\r\n    .then(data => {\r\n      const orderObject = data;\r\n      setNumOrder(orderObject.order.number);\r\n      dispatch({\r\n        type: MODAL_VISIBLE\r\n      });\r\n      dispatch({\r\n        type: CLEAR_INGREDIENTS\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    })\r\n    } else if (cardsId.length === 0) {\r\n      alert('Для отправки заказа выберите ингридиенты')\r\n    } else if (cardsBun.length === 0) {\r\n      alert('Для отправки заказа необходимо выбрать булку')\r\n    }\r\n\r\n    const setNumOrder = (numOrder:number) => {\r\n      dispatch({\r\n        type: SET_ORDER,\r\n        payload: numOrder\r\n      });\r\n    }\r\n  }\r\n}","import React, { useEffect, useCallback, useRef } from 'react';\r\nimport orderStyles from './burger-constructor.module.css';\r\nimport { ConstructorElement, Button, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport Subtract from '../../images/Subtract.svg';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { PRICE } from '../../services/actions/index';\r\nimport { MOVE_CARD, ADD_ITEM, DELETE_ITEM, REPLACE_ITEM } from '../../services/actions/actions';\r\nimport { useDrop, useDrag } from \"react-dnd\";\r\nimport { Ingredient } from '../../utils/types';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\ninterface BurgerConstructorProps {\r\n  onClick: (selectedIngredients:Array<Ingredient>) => void\r\n}\r\n\r\ninterface BurgerItemProps {\r\n  dataCard: Ingredient\r\n  typeMean: \"top\" | \"bottom\" | undefined\r\n  isLocked?: boolean\r\n  handleClose?: (() => void) | undefined\r\n}\r\n\r\nexport type ReducerTypeData = {\r\n  type: string\r\n  card: Ingredient[]\r\n  price: number\r\n}\r\n\r\nexport interface StateTypeData {\r\n  cards: Ingredient[]\r\n  price: number\r\n}\r\n\r\nfunction BurgerItem(props:BurgerItemProps) {\r\n  return (\r\n      <ConstructorElement\r\n        type={props.typeMean}\r\n        isLocked={props.isLocked}\r\n        text={props.dataCard.name}\r\n        price={props.dataCard.price}\r\n        handleClose={props.handleClose}\r\n        thumbnail={props.dataCard.image_large}\r\n      /> \r\n  )\r\n}\r\n\r\nconst IngredientCard = (props:{card:Ingredient, index: number, moveCard: (dragIndex:number, hoverIndex: number)=>void, onDeleteHandler: (index: number) => void}) => {\r\n  const {card, index, onDeleteHandler, moveCard} = props;\r\n  const id = card._id;\r\n  let locked;\r\n\r\n  const ref = useRef<HTMLLIElement>(null);\r\n\r\n  const [, drag] = useDrag({\r\n    type: \"constructor\",\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: \"constructor\",\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      }\r\n    },\r\n    hover(item:any, monitor) {\r\n      // console.log(item)\r\n      if (!ref.current) {\r\n        return\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index\r\n      if (dragIndex === hoverIndex) {\r\n        return\r\n      }\r\n      const hoverBoundingRect = ref && ref.current.getBoundingClientRect();\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n      moveCard(dragIndex, hoverIndex)\r\n      item.index = hoverIndex\r\n    },\r\n  })\r\n\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <li \r\n      className={orderStyles.list_item}\r\n      id={`${card._id}${index}`} \r\n      ref={ref}\r\n      data-handler-id={handlerId}\r\n    >\r\n      <DragIcon type=\"primary\" />\r\n      <BurgerItem \r\n        dataCard={card} \r\n        typeMean={undefined} \r\n        isLocked={locked} \r\n        handleClose={()=>onDeleteHandler(index)}/>\r\n    </li>\r\n  )     \r\n}\r\n\r\nfunction BurgerConstructor(props:BurgerConstructorProps) {\r\n  \r\n  const { onClick } = props;\r\n  const cards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients\r\n  });\r\n  const selectCards  = useSelector((store) => {\r\n    return store.ingredient.selectedIngredients\r\n  });\r\n  let sum=0;\r\n  let cardData:Ingredient[] = [];\r\n  const { selectedIngredients, price } = useSelector((store) => {\r\n    return {...store.ingredient}\r\n  });\r\n  const dispatch = useDispatch();\r\n\r\nconst handleDrop = (item:{id: string}) => {\r\n  const element = selectCards.filter((element:Ingredient) => element.type === 'bun');\r\n  const typeItem = cards.filter((element:Ingredient) => element._id === item.id)[0].type;\r\n  if (element.length !== 0 &&  typeItem === 'bun') {\r\n    dispatch({\r\n      type: REPLACE_ITEM,\r\n      payload: cards.filter((element:Ingredient) => element._id === item.id)\r\n    });\r\n  } else {\r\n    const elementItem = cards.filter((element:Ingredient) => element._id === item.id)[0];\r\n    dispatch({\r\n      type: ADD_ITEM,\r\n      payload: {\r\n        card: elementItem,\r\n        uuid: uuidv4()\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nconst deleteItem = (index:number) => {\r\n  dispatch({\r\n    type: DELETE_ITEM,\r\n    payload: selectCards.filter((element:Ingredient, indexElement:number) => indexElement !== index)\r\n  });\r\n}\r\n\r\nconst [, dropTarget] = useDrop({\r\n  accept: \"ingredient\",\r\n  drop(item:{id: string}) {\r\n    handleDrop(item);\r\n  },\r\n});\r\n\r\n\r\n  useEffect (() => {\r\n    const setState = () => {\r\n        selectedIngredients.forEach((card:Ingredient) => { \r\n      if (card.type === 'bun') {\r\n         cardData = [...cardData, card, card];\r\n         sum += card.price*2;\r\n      } else {\r\n        cardData = [...cardData, card];\r\n        sum = sum + card.price;\r\n      }\r\n    })\r\n    }\r\n    setState(); \r\n    dispatch({type: PRICE, payload: sum});\r\n  }, [selectedIngredients]);\r\n  \r\n  const moveCard = useCallback((dragIndex, hoverIndex) => {\r\n    let dragCard = selectedIngredients[dragIndex];\r\n    selectedIngredients.splice(dragIndex, 1);\r\n    selectedIngredients.splice(hoverIndex, 0, dragCard)\r\n    dispatch({\r\n      type: MOVE_CARD,\r\n      payload: selectedIngredients\r\n    })\r\n  }, [selectedIngredients])\r\n  \r\n  \r\n  const [bun] = selectedIngredients.filter((card:Ingredient) => card.type === 'bun');\r\n\r\n    return (\r\n      <section className={`ml-10 ${orderStyles.order}`} ref={dropTarget}>\r\n        <div className={`mt-25`}>\r\n          <ul className={`${orderStyles.list_locked} pl-4`}>\r\n         { bun &&\r\n            <li className={orderStyles.list_item} key={bun._id}>\r\n              <BurgerItem \r\n                dataCard={{...bun, name: `${bun.name} (верх)`}} \r\n                typeMean='top' isLocked={true}/>\r\n            </li>      \r\n         }  \r\n          </ul>\r\n          <ul className={`${orderStyles.list_onlocked} pl-4`}>\r\n            {selectedIngredients.map((card, index, arr) => {\r\n              if (card.type !== 'bun') {\r\n                return (\r\n                <IngredientCard \r\n                  card={card} \r\n                  index={index} \r\n                  key={card.uuid}\r\n                  onDeleteHandler={deleteItem}\r\n                  moveCard={moveCard}\r\n                />\r\n                )\r\n              }       \r\n            })}\r\n          </ul>\r\n          <ul className={`${orderStyles.list_locked} pl-4`}>\r\n          {bun &&\r\n            <li className={orderStyles.list_item} key={bun._id}>\r\n              <BurgerItem \r\n                dataCard={{...bun, name: `${bun.name} (низ)`}} \r\n                typeMean='bottom' isLocked={true} />\r\n            </li>   \r\n          }\r\n          </ul>\r\n          <div className={`mt-10 mr-4 ${orderStyles.accept_block}`}>\r\n            <div className={`mr-10 ${orderStyles.sum_block}`}>\r\n              <p className={`mr-2 text text_type_digits-medium`}>{price}</p>\r\n              <img src={Subtract} alt=\"icon\" className={orderStyles.icon} />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\" onClick={()=>onClick(selectCards)}>\r\n              Оформить заказ\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        \r\n      </section>\r\n    );\r\n  }\r\n\r\nexport default BurgerConstructor;","import React from \"react\";\r\nimport styleModal from \"./modal-overlay.module.css\";\r\n\r\ninterface ModalOverlayProps {\r\n  onClick: () => void;\r\n}\r\n\r\nexport default function ModalOverlay(props: ModalOverlayProps) {\r\n  return (\r\n    <div className={styleModal.modalOverlay} onClick={props.onClick}></div>\r\n  );\r\n}\r\n","import { useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as React from 'react'\r\nimport styleModal from './modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\ninterface ModalProps {\r\n  onClose: () => void\r\n  title?: string\r\n  children: React.ReactNode\r\n}\r\n\r\nexport default function Modal(props:ModalProps) {\r\n    const modalRoot = document.getElementById('modals')!;\r\n    const { onClose, title } = props;\r\n    useEffect(() => {\r\n      const handleEscClose = (e: KeyboardEvent) => {\r\n        if (e.key === 'Escape') {\r\n          onClose();\r\n        };\r\n      }\r\n            \r\n      window.addEventListener('keydown', handleEscClose);\r\n   \r\n      return () => {\r\n        window.removeEventListener('keydown', handleEscClose);\r\n      }\r\n    }, [onClose]);\r\n\r\n    \r\n\r\n    return ReactDOM.createPortal(\r\n      ( \r\n        <>\r\n          <div className={styleModal.modal_container}>\r\n            <div className={styleModal.modal}>\r\n              <div className={styleModal.header}>\r\n                <p className='text text_type_main-large'>\r\n                  {props.title}\r\n                </p>\r\n                <button className={`${styleModal.buttonClose}`} onClick={onClose}>\r\n                  <CloseIcon type=\"primary\" />\r\n                </button>\r\n              </div>\r\n              {props.children}\r\n            </div>\r\n            <ModalOverlay onClick={onClose}/>\r\n          </div>\r\n        </>\r\n      ), \r\n        modalRoot\r\n    );\r\n  \r\n  }","import { useEffect } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useParams } from \"react-router-dom\";\r\nimport ReactDOM from 'react-dom';\r\nimport * as React from 'react'\r\nimport style from './modal-order.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\nimport { IOrder } from '../../utils/types';\r\n\r\ninterface IdDate {\r\n  id: string;\r\n}\r\n\r\ninterface ModalProps {\r\n  onClose: () => void,\r\n  title?: string,\r\n  children: React.ReactNode\r\n}\r\n\r\nexport default function ModalOrder(props:ModalProps) {\r\n  const id: IdDate = useParams();\r\n    const modalRoot = document.getElementById('modals')!;\r\n    const orders = useSelector((store) => {\r\n      return store.order.messages.orders;\r\n    });\r\n    let order;\r\n    if (orders) {\r\n      order = orders.find((el: IOrder) => el._id === id.id);\r\n    }\r\n\r\n    const { onClose, title } = props;\r\n\r\n    \r\n    \r\n    useEffect(() => {\r\n      const handleEscClose = (e: KeyboardEvent) => {\r\n        if (e.key === 'Escape') {\r\n          onClose();\r\n        };\r\n      }\r\n            \r\n      window.addEventListener('keydown', handleEscClose);\r\n   \r\n      return () => {\r\n        window.removeEventListener('keydown', handleEscClose);\r\n      }\r\n    }, [onClose]);\r\n\r\n    return ReactDOM.createPortal(\r\n      ( \r\n        <>\r\n          <div className={style.modal_container}>\r\n            <div className={style.modal}>\r\n              <div className={style.header}>\r\n                <p className='text text_type_digits-default'>\r\n                  {`#${order && order.number}`}\r\n                </p>\r\n                <button className={`${style.buttonClose}`} onClick={onClose}>\r\n                  <CloseIcon type=\"primary\" />\r\n                </button>\r\n              </div>\r\n              {props.children}\r\n            </div>\r\n            <ModalOverlay onClick={onClose}/>\r\n          </div>\r\n        </>\r\n      ), \r\n        modalRoot\r\n    );\r\n  \r\n  }","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useParams, useRouteMatch } from \"react-router-dom\";\r\nimport style from \"./order.module.css\";\r\nimport {\r\n  CloseIcon,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Ingredient, IOrder } from '../../utils/types';\r\n\r\ninterface IngredientProps {\r\n  title: string;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface IdDate {\r\n  id: string;\r\n}\r\n\r\nfunction OrderIngredient(props: {ingredient: {_id: string, count: number}, cards: Array<Ingredient>}) {\r\n  const { ingredient, cards } = props;\r\n\r\n  const card = cards.find((card: Ingredient) => {\r\n    return card._id === ingredient._id;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {card && (\r\n        <li className={style.item}>\r\n          <div className={style.imageContainer}>\r\n            <div className={style.image}>\r\n              <img src={`${card.image_mobile}`} alt=\"\" />\r\n            </div>\r\n            <p\r\n              className={`${style.name} ml-4 mr-4 text text_type_main-default`}\r\n            >\r\n              {card.name}\r\n            </p>\r\n          </div>\r\n          <p className={`${style.priceItem}`}>\r\n            <span className={`mr-2 text_type_digits-default`}>\r\n              {ingredient.count}&times;{card.price}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </p>\r\n        </li>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function Order(props: IngredientProps) {\r\n  const id: IdDate = useParams();\r\n  const { path } = useRouteMatch();\r\n  const orders = useSelector((store) => {\r\n      return store.order.messages.orders;\r\n    });\r\n\r\n  const cards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients;\r\n  });\r\n  let sum = 0;\r\n  let color;\r\n  let arr: Array<{_id: string, count: number}> = [];\r\n  let order:IOrder | undefined;\r\n  let day = \"\";\r\n  const now = new Date();\r\n  const today = now.setHours(23, 59, 59, 999).valueOf();\r\n  if (orders) {\r\n    order = orders.find((el: IOrder) => el._id === id.id);\r\n    if (order) {\r\n      sum = order.ingredients.reduce((acc: number, el: string) => {\r\n        const data:Ingredient | undefined = cards.find((item: Ingredient) => item._id === el);\r\n        if (data) {\r\n          const price = data.price;\r\n          return acc + price;\r\n        }\r\n        return acc;\r\n      }, 0);\r\n      const otherDay = new Date(order.createdAt);\r\n      const other = otherDay.valueOf();\r\n\r\n      const num = Math.floor((today - other) / 86400000);\r\n      if (num <= 1) {\r\n        day =\r\n          \"Сегодня, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else if (num <= 2) {\r\n        day =\r\n          \"Вчера, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else if (num <= 3) {\r\n        day =\r\n          \"Позавчера, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else {\r\n        if (num <= 4 || (num % 10 >= 1 && num % 10 <= 1)) {\r\n          day =\r\n            `${num} дня назад, ` +\r\n            otherDay.getHours() +\r\n            \":\" +\r\n            otherDay.getMinutes() +\r\n            \" i-GMT+\" +\r\n            -now.getTimezoneOffset() / 60;\r\n        } else {\r\n          day =\r\n            `${num} дней назад, ` +\r\n            otherDay.getHours() +\r\n            \":\" +\r\n            otherDay.getMinutes() +\r\n            \" i-GMT+\" +\r\n            -now.getTimezoneOffset() / 60;\r\n        }\r\n      }\r\n      color = {\r\n        color: \"#F2F2F3\",\r\n      };\r\n\r\n      order.status === \"Выполнен\"\r\n        ? (color.color = \"#00CCCC\")\r\n        : order.status === \"Отменен\"\r\n        ? (color.color = \"#b50000\")\r\n        : null;\r\n\r\n      const uniqueId = [...new Set(order.ingredients)];\r\n\r\n      arr = uniqueId.map((id, index) => {\r\n        let count = order ? order.ingredients.filter((el: string) => el === id).length : 0;\r\n        return {\r\n          _id: id,\r\n          count: count,\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {order && (\r\n        <div className={style.modalContainer}>\r\n          <h2 className=\"text text_type_main-medium mt-10\">{order.name}</h2>\r\n          <p className=\"text text_type_main-default mt-3\" style={color}>\r\n            {order.status}\r\n          </p>\r\n          <h3 className=\"text text_type_main-medium mt-15\">Состав:</h3>\r\n          <ul className={style.list}>\r\n            {order.ingredients &&\r\n              arr.map((ingredient, index) => {\r\n                return (\r\n                  <OrderIngredient\r\n                    ingredient={ingredient}\r\n                    key={index}\r\n                    cards={cards}\r\n                  />\r\n                );\r\n              })}\r\n          </ul>\r\n          <div className={`${style.footer}`}>\r\n            <p className={`${style.date} text text_type_main-default`}>{day}</p>\r\n            <p className={`${style.priceItem}`}>\r\n              <span className={`mr-2 text_type_digits-default`}>{sum}</span>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\nimport { IOrder } from '../../utils/types';\r\n\r\nexport interface IWsConnectionStartAction {\r\n  readonly type: typeof WS_CONNECTION_START;\r\n  readonly payload: string;\r\n}\r\n\r\nexport interface IWsConnectionSuccessAction {\r\n  readonly type: typeof WS_CONNECTION_SUCCESS;\r\n  readonly payload: Event;\r\n}\r\n\r\nexport interface IWsConnectionErrorAction {\r\n  readonly type: typeof WS_CONNECTION_ERROR;\r\n  readonly payload: boolean | undefined\r\n}\r\n\r\nexport interface IWsConnectionClosedAction {\r\n  readonly type: typeof WS_CONNECTION_CLOSED;\r\n  readonly payload: Event;\r\n}\r\n\r\nexport interface IWsGetMessageAction {\r\n  readonly type: typeof WS_GET_MESSAGE;\r\n  readonly payload: {orders: Array<IOrder>, success: boolean, total: number, totalToday: number };\r\n}\r\n\r\nexport interface IWsSendMessageAction {\r\n  readonly type: typeof WS_SEND_MESSAGE;\r\n  readonly payload: {orders: Array<string>};\r\n}\r\n\r\nexport type TConnectionActions =\r\n| IWsConnectionStartAction\r\n| IWsConnectionSuccessAction\r\n| IWsConnectionErrorAction\r\n| IWsConnectionClosedAction\r\n| IWsGetMessageAction\r\n| IWsSendMessageAction;\r\n\r\nexport type TWSActions = {\r\n  wsInit: typeof WS_CONNECTION_START,\r\n  wsSendMessage: typeof WS_SEND_MESSAGE,\r\n  onOpen: typeof WS_CONNECTION_SUCCESS,\r\n  onClose: typeof WS_CONNECTION_CLOSED,\r\n  onError: typeof WS_CONNECTION_ERROR,\r\n  onMessage: typeof WS_GET_MESSAGE\r\n}","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { useParams, useRouteMatch } from \"react-router-dom\";\r\nimport style from \"./order.module.css\";\r\nimport { getCookie } from '../../services/utils';\r\nimport {\r\n  CloseIcon,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/action-types';\r\nimport { Ingredient, IOrder } from \"../../utils/types\";\r\n\r\n\r\ninterface IngredientProps {\r\n  title: string;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface IdDate {\r\n  id: string;\r\n}\r\n\r\nfunction OrderIngredient(props: {ingredient: {_id: string, count: number}, cards: Array<Ingredient>}) {\r\n  const { ingredient, cards } = props;\r\n\r\n  const card = cards.find((card: Ingredient) => {\r\n    return card._id === ingredient._id;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {card && (\r\n        <li className={style.item}>\r\n          <div className={style.imageContainer}>\r\n            <div className={style.image}>\r\n              <img src={`${card.image_mobile}`} alt=\"\" />\r\n            </div>\r\n            <p\r\n              className={`${style.name} ml-4 mr-4 text text_type_main-default`}\r\n            >\r\n              {card.name}\r\n            </p>\r\n          </div>\r\n          <p className={`${style.priceItem}`}>\r\n            <span className={`mr-2 text_type_digits-default`}>\r\n              {ingredient.count}&times;{card.price}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </p>\r\n        </li>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function OrderPage(props: IngredientProps) {\r\n  const id: IdDate = useParams();\r\n  const { path } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n  let orders = useSelector((store) => {\r\n    return store.order.messages.orders;\r\n  });\r\n  const state = useSelector((store) => {\r\n    return store.user\r\n  });\r\n\r\n  const cards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients;\r\n  });\r\n  let sum = 0;\r\n  let color;\r\n  let arr: {_id: string, count: number}[] = [];\r\n  let order: IOrder | undefined;\r\n  let day = \"\";\r\n  const now = new Date();\r\n  const today = now.setHours(23, 59, 59, 999).valueOf();\r\n\r\n  if (orders) {\r\n    order = orders.find((el: IOrder) => el._id === id.id);\r\n    if (order) {\r\n      const otherDay = new Date(order.createdAt);\r\n      const other = otherDay.valueOf();\r\n      sum = order.ingredients.reduce((acc: number, el: string) => {\r\n        const data = cards.find((item: Ingredient) => item._id === el);\r\n        if (data) {\r\n          const price = data.price;\r\n          return acc + price;\r\n        }\r\n        return acc;\r\n      }, 0);\r\n\r\n      const num = Math.floor((today - other) / 86400000);\r\n      if (num <= 1) {\r\n        day =\r\n          \"Сегодня, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else if (num <= 2) {\r\n        day =\r\n          \"Вчера, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else if (num <= 3) {\r\n        day =\r\n          \"Позавчера, \" +\r\n          otherDay.getHours() +\r\n          \":\" +\r\n          otherDay.getMinutes() +\r\n          \" i-GMT+\" +\r\n          -now.getTimezoneOffset() / 60;\r\n      } else {\r\n        if (num <= 4 || (num % 10 >= 1 && num % 10 <= 1)) {\r\n          day =\r\n            `${num} дня назад, ` +\r\n            otherDay.getHours() +\r\n            \":\" +\r\n            otherDay.getMinutes() +\r\n            \" i-GMT+\" +\r\n            -now.getTimezoneOffset() / 60;\r\n        } else {\r\n          day =\r\n            `${num} дней назад, ` +\r\n            otherDay.getHours() +\r\n            \":\" +\r\n            otherDay.getMinutes() +\r\n            \" i-GMT+\" +\r\n            -now.getTimezoneOffset() / 60;\r\n        }\r\n      }\r\n\r\n      color = {\r\n        color: \"#F2F2F3\",\r\n      };\r\n      order.status === \"Выполнен\"\r\n        ? (color.color = \"#00CCCC\")\r\n        : order.status === \"Отменен\"\r\n        ? (color.color = \"#b50000\")\r\n        : null;\r\n      const uniqueId = [...new Set(order.ingredients)];\r\n\r\n      arr = uniqueId.map((id, index) => {\r\n        let count: number = 0;\r\n        if (order) {\r\n          count = order.ingredients.filter((el: string) => el === id).length;\r\n        }\r\n        return {\r\n          _id: id,\r\n          count: count,\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(\r\n    () => {\r\n      if (state.user.name) {\r\n        const token = '?token=' + getCookie('token');\r\n        dispatch({ type: WS_CONNECTION_START, payload: token });\r\n      }\r\n\r\n      return () => {\r\n        dispatch({ type: WS_CONNECTION_CLOSED, payload: '' });\r\n      }\r\n    },\r\n    [state.user.name, orders]\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: '/all' });\r\n\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED, payload: '' });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {order && (\r\n        <div className={style.container}>\r\n          <div className={style.wrapperContent}>\r\n            <p\r\n              className={`${style.orderNumber} text text_type_digits-default`}\r\n            >{`#${order.number}`}</p>\r\n            <h2 className=\"text text_type_main-medium mt-10\">{order.name}</h2>\r\n            <p className=\"text text_type_main-default mt-3\" style={color}>\r\n              {order.status}\r\n            </p>\r\n            <h3 className=\"text text_type_main-medium mt-15\">Состав:</h3>\r\n            <ul className={style.list}>\r\n              {order.ingredients &&\r\n                arr.map((ingredient, index) => {\r\n                  return (\r\n                    <OrderIngredient\r\n                      ingredient={ingredient}\r\n                      key={index}\r\n                      cards={cards}\r\n                    />\r\n                  );\r\n                })}\r\n            </ul>\r\n            <div className={`${style.footer}`}>\r\n              <p className={`${style.date} text text_type_main-default`}>\r\n                {day}\r\n              </p>\r\n              <p className={`${style.priceItem}`}>\r\n                <span className={`mr-2 text_type_digits-default`}>{sum}</span>\r\n                <CurrencyIcon type=\"primary\" />\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styleOrder from './order-details.module.css';\r\nimport Gif from '../../images/done1.svg';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ninterface Order {\r\n  numOrder: number\r\n}\r\n\r\nexport default function OrderDetails(props:Order) {\r\n  return (\r\n    <>\r\n      <h2 className={`${styleOrder.numberOrder} mt-4 mb-8 text text_type_digits-large`}>{props.numOrder}</h2>\r\n      <p className={`${styleOrder.text} text text_type_main-medium`}>идентификатор заказа</p>\r\n      <div className={`${styleOrder.icon}`}>\r\n        <img src={Gif} alt=\"icon\" className={`mt-15 mb-15`}/>\r\n      </div>\r\n      <p className={`${styleOrder.text} text text_type_main-default mb-2`}>Ваш заказ начали готовить</p>\r\n      <p className={`${styleOrder.bottomText} text text_type_main-default mb-30`}>Дождитесь готовности на орбитальной станции</p>\r\n    </>  \r\n  )\r\n} ","import React, { useEffect } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useParams } from 'react-router-dom';\r\nimport styleIngredient from './ingredient-details.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Ingredient } from '../../utils/types';\r\n\r\ninterface IngredientProps {\r\n  title:string,\r\n  onClose: () => void\r\n}\r\n\r\ninterface IdDate {\r\n  id: string\r\n}\r\n\r\nexport default function IngredientDetails(props:IngredientProps) {\r\nconst id:IdDate = useParams();\r\nconst dataCards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients\r\n  });\r\nconst dataCard = dataCards.filter((card:Ingredient) => card._id === id.id)[0];\r\n\r\nreturn (\r\n    <>\r\n    {dataCard && \r\n      <div className={styleIngredient.modalContainer}>\r\n      <img src={dataCard.image_large} alt=\"icon\" className={`ml-30 ${styleIngredient.image}`} />\r\n      <h2 className={`${styleIngredient.title} text text_type_main-large`}>{dataCard.name}</h2>\r\n      <ul className={`${styleIngredient.nutritional_value}`}>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Калории, ккал</p>\r\n          <p className='text text_type_digits-default'>{dataCard.calories}</p>\r\n          </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Белки, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.proteins}</p>\r\n        </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Жиры, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.fat}</p>\r\n        </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Углеводы, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.carbohydrates}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    }\r\n    </>\r\n        \r\n        )\r\n  \r\n} ","import React, { useEffect } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useParams } from 'react-router-dom';\r\nimport styleIngredient from './ingredient-details.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Ingredient } from '../../utils/types';\r\n\r\ninterface IngredientProps {\r\n  title:string,\r\n  onClose: () => void\r\n}\r\n\r\ninterface IdDate {\r\n  id: string\r\n}\r\n\r\nexport default function IngredientDetailsPage(props:IngredientProps) {\r\nconst id:IdDate = useParams();\r\nconst dataCards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients\r\n  });\r\nconst dataCard = dataCards.filter((card:Ingredient) => card._id === id.id)[0];\r\n\r\nreturn (\r\n    <>\r\n    {dataCard && \r\n      <div className={styleIngredient.pageContainer}>\r\n      <div className={styleIngredient.headerPage}>\r\n        <p className='text text_type_main-large'>\r\n            {props.title}\r\n        </p>\r\n     </div>\r\n     <div className={`${styleIngredient.imagePageContainer}`}>\r\n        <img src={dataCard.image_large} alt=\"icon\" className={`ml-30 ${styleIngredient.imagePage}`} />\r\n    </div>\r\n      <h2 className={`${styleIngredient.title} text text_type_main-large`}>{dataCard.name}</h2>\r\n      <ul className={`${styleIngredient.nutritional_value}`}>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Калории, ккал</p>\r\n          <p className='text text_type_digits-default'>{dataCard.calories}</p>\r\n          </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Белки, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.proteins}</p>\r\n        </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Жиры, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.fat}</p>\r\n        </li>\r\n        <li className={styleIngredient.list_item}>\r\n          <p className='text text_type_main-default'>Углеводы, г</p>\r\n          <p className='text text_type_digits-default'>{dataCard.carbohydrates}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    }\r\n    </>\r\n        \r\n        )\r\n  \r\n} ","export const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const UPDATE_USER_SUCCESS: 'UPDATE_USER_SUCCESS' = 'UPDATE_USER_SUCCESS';\r\nexport const LOGOUT_USER: 'LOGOUT_USER' = 'LOGOUT_USER';\r\nimport { getUserRequest, apdateTokenRequest, loginRequest, logoutRequest } from '../api';\r\nimport { checkResponse } from './index';\r\nimport { deleteCookie, setCookie } from '../utils';\r\nimport { AppDispatch, AppThunk } from '../../utils/index';\r\n\r\nexport interface IGetUserSuccessAction {\r\n  readonly type: typeof GET_USER_SUCCESS;\r\n  readonly payload: { password: string, email: string, name: string };\r\n}\r\n\r\nexport interface IUpdateUserSuccessAction {\r\n  readonly type: typeof UPDATE_USER_SUCCESS;\r\n  readonly payload: {name: string, email: string, password: string};\r\n}\r\n\r\nexport interface ILogoutUserAction {\r\n  readonly type: typeof LOGOUT_USER;\r\n}\r\n\r\nexport type TUserActions =\r\n| IGetUserSuccessAction\r\n| IUpdateUserSuccessAction\r\n| ILogoutUserAction;\r\n\r\nexport const getUserDate: AppThunk = (user:{ password: string, email: string, name: string }) => {\r\n  return function(dispatch: AppDispatch) {\r\n    getUserRequest()\r\n    .then(checkResponse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        dispatch({\r\n          type: GET_USER_SUCCESS,\r\n          payload: { password: localStorage.getItem('password'), ...data.user }\r\n        })\r\n      }\r\n      return data.success;\r\n    })\r\n    .catch(e => {\r\n      if (user.name) {\r\n        const data:Promise<void> = apdateTokenRequest()\r\n        .then(checkResponse)\r\n        .then(data => {\r\n          let authToken;\r\n          if (data.accessToken && data.accessToken.indexOf('Bearer') === 0) {\r\n            authToken = data.accessToken.split('Bearer ')[1];\r\n          }\r\n          if (authToken) {\r\n            setCookie('token', authToken, 0);\r\n            localStorage.setItem('refreshToken', `${data.refreshToken}`);\r\n            console.log('Token обновлен')\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e.type);\r\n        }) \r\n      }\r\n      console.log(e.type);\r\n    }) \r\n  }\r\n}\r\n\r\nexport const signInUser: AppThunk = (form: {email: string, password: string}) => {\r\n  return function(dispatch: AppDispatch) {\r\n    loginRequest(form)\r\n      .then(checkResponse)\r\n      .then(data => {\r\n        let authToken;\r\n        if (data.accessToken && data.accessToken.indexOf('Bearer') === 0) {\r\n          authToken = data.accessToken.split('Bearer ')[1];\r\n        }\r\n        if (authToken) {\r\n          setCookie('token', authToken, 0);\r\n          localStorage.setItem('refreshToken', `${data.refreshToken}`);\r\n        }\r\n      if (data.success) {\r\n        dispatch({\r\n          type: GET_USER_SUCCESS,\r\n          payload: {...form, ...data.user}\r\n        })\r\n        localStorage.setItem('password', `${form.password}`);\r\n      }\r\n      })\r\n      .catch(e => {\r\n        console.log(e.type);\r\n      })\r\n        \r\n  }\r\n}\r\n\r\nexport const signOutUser: AppThunk = (token:string|null) => {\r\n  return function(dispatch: AppDispatch) {\r\n    logoutRequest(token)\r\n    .then(checkResponse)\r\n    .then(data => data)\r\n    .catch(e => {\r\n        console.log(e.type);\r\n    })\r\n    dispatch({\r\n      type: LOGOUT_USER\r\n    })\r\n    deleteCookie('token');\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('password');\r\n  }\r\n}\r\n\r\n","import React, { useContext, createContext, useCallback, FunctionComponent } from \"react\";\r\nimport { deleteCookie, setCookie } from \"./utils\";\r\nimport { loginRequest, getUserRequest, logoutRequest } from \"./api\";\r\nimport { LOGOUT_USER } from \"./actions/user-actions\";\r\nimport { useDispatch, useSelector } from \"../services/hooks\";\r\nimport { checkResponse } from \"./actions/index\";\r\nimport { apdateTokenRequest } from \"./api\";\r\nimport { getUserDate, signInUser, signOutUser } from \"./actions/user-actions\";\r\nimport { ILogin, IAuth } from '../utils/types';\r\n\r\nconst AuthContext = createContext<any>(undefined);\r\n\r\nexport function ProvideAuth ({ children }: {children:React.ReactNode}) {\r\n  const auth: IAuth = useProvideAuth();\r\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function useProvideAuth() {\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((store) => {\r\n    return store.user;\r\n  });\r\n\r\n  const getUser = () => dispatch(getUserDate(user));\r\n\r\n  const signIn = (form: ILogin) => dispatch(signInUser(form));\r\n\r\n  const signOut = (token: string|null) => dispatch(signOutUser(token));\r\n\r\n  return {\r\n    user,\r\n    getUser,\r\n    signIn,\r\n    signOut,\r\n  };\r\n}\r\n","import { useAuth } from '../services/auth';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nexport function ProtectedRoute({ children, ...rest }:{children:React.ReactNode, path:string, exact: boolean}) {\r\n  let { getUser, ...auth } = useAuth();\r\n  const [isUserLoaded, setUserLoaded] = useState(false);\r\n  const init = async () => {\r\n     await getUser();\r\n     setUserLoaded(true);\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  if (!isUserLoaded) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n          auth.user.name ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/login',\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}","import React, { useCallback, useState, useRef, ChangeEvent } from \"react\";\r\nimport { Redirect, Link, useLocation } from \"react-router-dom\";\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./index.module.css\";\r\nimport { useAuth } from \"../services/auth\";\r\nimport { ILocation, IAuth } from \"../utils/types\";\r\n\r\nexport function LoginPage() {\r\n  const location: ILocation = useLocation();\r\n  const state = location.state;\r\n  const inputRefMail = useRef<HTMLInputElement>(null);\r\n  const auth: IAuth = useAuth();\r\n  const [form, setValue] = useState({ email: \"\", password: \"\" });\r\n\r\n  const onChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    // console.log(e.target.name);\r\n    setValue({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const login = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      auth.signIn(form);\r\n    },\r\n    [auth, form]\r\n  );\r\n\r\n  \r\n  if (auth.user.name) {\r\n    return <Redirect to={(state && state.from) || \"/\"} />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.container}>\r\n        <form className={styles.form} onSubmit={login}>\r\n          <h1 className={`${styles.heading} text text_type_main-medium mb-6`}>\r\n            Вход\r\n          </h1>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={onChange}\r\n              value={form.email}\r\n              name={\"email\"}\r\n              error={false}\r\n              ref={inputRefMail}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <PasswordInput\r\n              onChange={onChange}\r\n              value={form.password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <div className={`${styles.button} mb-20`}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Войти\r\n            </Button>\r\n          </div>\r\n          <div className={`${styles.container}`}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n              Вы - новый пользователь?\r\n            </p>\r\n            <Link\r\n              className={`${styles.link} ml-2 mb-4 text text_type_main-default`}\r\n              to=\"/register\"\r\n            >\r\n              Зарегистрироваться\r\n            </Link>\r\n          </div>\r\n          <div className={`${styles.container}`}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n              Забыли пароль?\r\n            </p>\r\n            <Link\r\n              className={`${styles.link} ml-2 text text_type_main-default`}\r\n              to=\"/forgot-password\"\r\n            >\r\n              Восстановить пароль\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./index.module.css\";\r\nimport { setUserRequest } from \"../services/api\";\r\nimport { checkResponse } from \"../services/actions/index\";\r\nimport { useDispatch } from \"../services/hooks\";\r\nimport { GET_USER_SUCCESS } from \"../services/actions/user-actions\";\r\nimport { useAuth } from '../services/auth';\r\n\r\nexport function RegisterPage() {\r\n  const [value, setValue] = useState(\"\");\r\n  const [valuePass, setValuePass] = useState(\"\");\r\n  const [valueName, setValueName] = useState(\"\");\r\n  const [register, setRegister] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValuePass(e.target.value);\r\n  };\r\n  const inputRefMail = useRef<HTMLInputElement>(null);\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setUserRequest({ name: valueName, email: value, password: valuePass })\r\n      .then(checkResponse)\r\n      .then((res) => {\r\n        if (res && res.success === true) {\r\n          dispatch({\r\n            type: GET_USER_SUCCESS,\r\n            payload: res,\r\n          });\r\n          setRegister(true);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e.type);\r\n      });\r\n    setValue(\"\");\r\n    setValuePass(\"\");\r\n    setValueName(\"\");\r\n  };\r\n\r\n  if (register) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.container}>\r\n        <form className={styles.form} onSubmit={onSubmit}>\r\n          <h1 className={`${styles.heading} text text_type_main-medium mb-6`}>\r\n            Регистрация\r\n          </h1>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Имя\"}\r\n              onChange={(e) => setValueName(e.target.value)}\r\n              value={valueName}\r\n              name={\"name\"}\r\n              error={false}\r\n              ref={inputRefMail}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={(e) => setValue(e.target.value)}\r\n              value={value}\r\n              name={\"email\"}\r\n              error={false}\r\n              ref={inputRefMail}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <PasswordInput\r\n              onChange={onChange}\r\n              value={valuePass}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <div className={`${styles.button} mb-20`}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Зарегистрироваться\r\n            </Button>\r\n          </div>\r\n          <div className={`${styles.container}`}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n              Уже зарегистрированы?\r\n            </p>\r\n            <Link\r\n              className={`${styles.link} ml-2 mb-4 text text_type_main-default`}\r\n              to=\"/login\"\r\n            >\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory, Link, useLocation } from \"react-router-dom\";\r\nimport styles from \"./not-found.module.css\";\r\nconst HOME_CRUMB = { path: \"/\", url: \"/\", title: \"Home\" };\r\n\r\nexport function NotFound404() {\r\n  const history = useHistory();\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    const errorBreadcrumb = [\r\n      HOME_CRUMB,\r\n      { path: pathname, url: pathname, title: \"404\" },\r\n    ];\r\n    history.replace({ state: errorBreadcrumb });\r\n  }, [history, pathname]);\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.container}>\r\n        <div className={styles.content}>\r\n          <h1>Oops! 404 Error</h1>\r\n          <p>The page you requested does not exist</p>\r\n          <br />\r\n          <br />\r\n          <p>\r\n            check the address or try{\" \"}\r\n            <Link to=\"/\" className={styles.link}>\r\n              homepage\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useRef } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './index.module.css';\r\nimport { checkResponse } from '../services/actions/index';\r\nimport { getPasswordRequest } from '../services/api';\r\nimport { useAuth } from '../services/auth';\r\nimport { IAuth } from \"../utils/types\";\r\n\r\nexport function ForgotPasswordPage() {\r\n  const [value, setValue] = useState('')\r\n  const [emailReset, setEmailReset] = useState(false);\r\n  const auth:IAuth = useAuth();\r\n\r\n  const onClick = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    getPasswordRequest({email: value})\r\n    .then(checkResponse)\r\n    .then(res => {\r\n      if (res && res.success === true) {\r\n        setEmailReset(true);\r\n      }\r\n    })\r\n    .catch(e => {\r\n      console.log(e.type);\r\n    })\r\n  }\r\n  const inputRefMail = useRef<HTMLInputElement>(null);\r\n\r\n  if (auth.user.name) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (emailReset) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/reset-password'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.container}>\r\n        <form className={styles.form} onSubmit={onClick}>\r\n          <h1 className={`${styles.heading} text text_type_main-medium mb-6`}>Восстановление пароля</h1>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <Input\r\n              type={'email'}\r\n              placeholder={'Укажите e-mail'}\r\n              onChange={e => setValue(e.target.value)}\r\n              value={value}\r\n              name={'email'}\r\n              error={false}\r\n              ref={inputRefMail}\r\n              errorText={'Ошибка'}\r\n              size={'default'}\r\n            />\r\n          </div>\r\n          <div className={`${styles.button} mb-20`}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Восстановить\r\n            </Button>\r\n          </div>\r\n          <div className={`${styles.container}`}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n               Вспомнили пароль?\r\n            </p>\r\n            <Link \r\n              className={`${styles.link} ml-2 mb-4 text text_type_main-default`} \r\n              to='/login'\r\n            >\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useCallback, useState, useRef, ChangeEvent } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './index.module.css';\r\nimport { setResetPasswordRequest } from '../services/api';\r\nimport { checkResponse } from '../services/actions/index';\r\nimport { useAuth } from '../services/auth';\r\nimport { IAuth } from '../utils/types';\r\n\r\nexport function ResetPasswordPage() {\r\n  const [form, setValue] = useState({ password: '', token: '' });\r\n  const [passwordReset, setPasswordReset] = useState(false);\r\n  const auth:IAuth = useAuth();\r\n  const onChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue({ ...form, [e.target.name]: e.target.value });\r\n  }\r\n  const resetPassword = useCallback(\r\n    e => {\r\n      e.preventDefault();\r\n      setResetPasswordRequest(form)\r\n      .then(checkResponse)\r\n      .then(res => {\r\n        if (res && res.success === true) {\r\n          setPasswordReset(true);\r\n        }\r\n      })\r\n      .catch(e => {\r\n        console.log(e.type);\r\n      })\r\n    },\r\n    [form]\r\n  );\r\n\r\n  const inputRefMail = useRef<HTMLInputElement>(null);\r\n\r\n  if (auth.user.name) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (passwordReset) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/login'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.container}>\r\n        <form className={styles.form} onSubmit={resetPassword}>\r\n          <h1 className={`${styles.heading} text text_type_main-medium mb-6`}>Восстановление пароля</h1>\r\n          <div className={`${styles.input} mb-6`}>\r\n              <PasswordInput onChange={onChange} value={form.password} name={'password'} />\r\n          </div>\r\n          <div className={`${styles.input} mb-6`}>\r\n            <Input\r\n              type={'text'}\r\n              placeholder={'Введите код из письма'}\r\n              onChange={onChange}\r\n              value={form.token}\r\n              name={'token'}\r\n              error={false}\r\n              ref={inputRefMail}\r\n              errorText={'Ошибка'}\r\n              size={'default'}\r\n            />\r\n          </div>\r\n          <div className={`${styles.button} mb-20`}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Сохранить\r\n            </Button>\r\n          </div>\r\n          <div className={`${styles.container}`}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n               Вспомнили пароль?\r\n            </p>\r\n            <Link \r\n              className={`${styles.link} ml-2 text text_type_main-default`} \r\n              to='/login'\r\n            >\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useCallback, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styles from \"./index.module.css\";\r\nimport { useDispatch, useSelector } from '../services/hooks';\r\nimport { Router, Switch, Route } from \"react-router-dom\";\r\nimport { ProfileDataPage, OrdersPage, NotFound404 } from \".\";\r\nimport { WS_CONNECTION_CLOSED } from '../services/action-types';\r\nimport { useAuth } from \"../services/auth\";\r\nimport { ProtectedRoute } from \"../components/protected-routh\";\r\nimport { getCookie } from '../services/utils';\r\nimport { IAuth, IOrder } from \"../utils/types\";\r\nconst links = [\"Профиль\", \"История заказов\", \"Выход\"];\r\n\r\nexport function ProfilePage(props: {onClick: (order: IOrder)=> void}) {\r\n  let auth: IAuth = useAuth();\r\n  const dispatch = useDispatch();\r\n  const { onClick } = props;\r\n  let logout = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      if (localStorage.getItem(\"refreshToken\")) {\r\n        auth.signOut(localStorage.getItem(\"refreshToken\"));\r\n      }\r\n      dispatch({ type: WS_CONNECTION_CLOSED, payload: ''  });\r\n    },\r\n    [auth]\r\n  );\r\n  const state = useSelector((store) => {\r\n    return store.user\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.wrapperProfile}>\r\n        <div className={`${styles.container} ${styles.containerItems}`}>\r\n          <nav>\r\n            <ul className={styles.items}>\r\n              {links.map((link, index) => {\r\n                let to = \"\";\r\n                link === \"Профиль\"\r\n                  ? (to = \"/profile\")\r\n                  : link === \"История заказов\"\r\n                  ? (to = \"/profile/orders\")\r\n                  : (to = \"/login\");\r\n                if (link === \"Выход\") {\r\n                  return (\r\n                    <li\r\n                      className={`${styles.item} text text_type_main-medium`}\r\n                      key={index}\r\n                    >\r\n                      <NavLink\r\n                        key={index}\r\n                        className={styles.linkProfile}\r\n                        activeClassName={styles.activeLink}\r\n                        to={`${to}`}\r\n                        onClick={logout}\r\n                      >\r\n                        {link}\r\n                      </NavLink>\r\n                    </li>\r\n                  );\r\n                }\r\n\r\n                return (\r\n                  <li\r\n                    className={`${styles.item} text text_type_main-medium`}\r\n                    key={index}\r\n                  >\r\n                    <NavLink\r\n                      key={index}\r\n                      className={styles.linkProfile}\r\n                      activeClassName={styles.activeLink}\r\n                      to={`${to}`}\r\n                    >\r\n                      {link}\r\n                    </NavLink>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n            <p\r\n              className={`${styles.textProfile} text text_type_main-default mt-20`}\r\n            >\r\n              В этом разделе вы можете <br />\r\n              изменить свои персональные данные\r\n            </p>\r\n          </nav>\r\n\r\n          <Switch>\r\n            <ProtectedRoute path=\"/profile\" exact={true}>\r\n              <ProfileDataPage />\r\n            </ProtectedRoute>\r\n            <ProtectedRoute path=\"/profile/orders\" exact={true}>\r\n              <OrdersPage onClick={onClick}/>\r\n            </ProtectedRoute>\r\n            <Route path=\"*\">\r\n              <NotFound404 />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n  EmailInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"../index.module.css\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { checkResponse } from \"../../services/actions/index\";\r\nimport { UPDATE_USER_SUCCESS } from \"../../services/actions/user-actions\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport { apdateUserDataRequest } from \"../../services/api\";\r\n\r\nexport function ProfileDataPage() {\r\n  const [disabledName, setDisabledName] = useState(true);\r\n  const [valuePass, setValuePass] = useState(\"\");\r\n  const [valueName, setValueName] = useState(\"\");\r\n  const [valueLogin, setValueLogin] = useState(\"\");\r\n  const [display, setDisplay] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const { user } = useSelector((store) => {\r\n    return store.user;\r\n  });\r\n\r\n  useEffect(() => {\r\n    setValueLogin(user.email);\r\n    setValueName(user.name);\r\n    setValuePass(user.password);\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      valuePass !== user.password ||\r\n      valueName !== user.name ||\r\n      valueLogin !== user.email\r\n    ) {\r\n      setDisplay(true);\r\n    } else {\r\n      setDisplay(false);\r\n    }\r\n  }, [valuePass, valueName, valueLogin, user.email, user.name, user.password]);\r\n\r\n  const cancel = () => {\r\n    setValueLogin(user.email);\r\n    setValueName(user.name);\r\n    setValuePass(user.password);\r\n  };\r\n\r\n  const save = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    apdateUserDataRequest({\r\n      email: valueLogin,\r\n      password: valuePass,\r\n      name: valueName,\r\n    })\r\n      .then(checkResponse)\r\n      .then((res) => {\r\n        if (res && res.success === true) {\r\n          dispatch({\r\n            type: UPDATE_USER_SUCCESS,\r\n            payload: { ...res.user, password: valuePass },\r\n          });\r\n          localStorage.setItem(\"password\", valuePass);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e.type);\r\n      });\r\n  };\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    e.target.name === \"password\"\r\n      ? setValuePass(e.target.value)\r\n      : e.target.name === \"name\"\r\n      ? setValueName(e.target.value)\r\n      : setValueLogin(e.target.value);\r\n  };\r\n\r\n  const onClickWindow = (e: any) => {\r\n    console.log(e);\r\n    if (e.target.name !== \"name\") {\r\n      setDisabledName(true);\r\n      window.removeEventListener(\"click\", onClickWindow);\r\n    }\r\n  };\r\n\r\n  const onIconClick = () => {\r\n    setTimeout(() => inputRef.current && inputRef.current.focus(), 0);\r\n    setDisabledName(false);\r\n    window.addEventListener(\"click\", onClickWindow);\r\n  };\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  return (\r\n    <div className={styles.wrapperProfile}>\r\n      <div className={`${styles.container} ${styles.containerProfile}`}>\r\n        <div className={`${styles.input} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={onChange}\r\n            icon={\"EditIcon\"}\r\n            value={valueName}\r\n            name={\"name\"}\r\n            error={false}\r\n            disabled={disabledName}\r\n            ref={inputRef}\r\n            onIconClick={onIconClick}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <div className={`${styles.input} mb-6`}>\r\n          <EmailInput onChange={onChange} value={valueLogin} name={\"email\"} />\r\n        </div>\r\n        <div className={`${styles.input} mb-6`}>\r\n          <PasswordInput\r\n            onChange={onChange}\r\n            value={valuePass}\r\n            name={\"password\"}\r\n          />\r\n        </div>\r\n      </div>\r\n      {display && (\r\n        <div className={styles.wrapperButton}>\r\n          <Button type=\"primary\" size=\"medium\" onClick={save}>\r\n            Сохранить\r\n          </Button>\r\n          <Button type=\"primary\" size=\"medium\" onClick={cancel}>\r\n            Отмена\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useCallback, useRef } from \"react\";\r\nimport {\r\n  ConstructorElement,\r\n  Button,\r\n  DragIcon,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport styles from \"./order-list.module.css\";\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\";\r\nimport { ILocation, IOrder, IOnClick, Ingredient } from \"../../utils/types\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport function OrderItem(props: {\r\n  order: IOrder;\r\n  cards: Array<Ingredient>;\r\n  type: string;\r\n  onClick: (order: IOrder) => void;\r\n}) {\r\n  const { order, cards, type, onClick } = props;\r\n  const { url } = useRouteMatch();\r\n  const location: ILocation = useLocation();\r\n\r\n  const number = order.ingredients.length - 6;\r\n  const sum = order.ingredients.reduce((acc: number, el: string) => {\r\n    const data = cards.find((item: Ingredient) => item._id === el);\r\n    if (data) {\r\n      const price = data.price;\r\n      return acc + price;\r\n    }\r\n    return acc;\r\n  }, 0);\r\n\r\n  let color = {\r\n    color: \"#F2F2F3\",\r\n  };\r\n  order.status === \"Выполнен\"\r\n    ? (color.color = \"#00CCCC\")\r\n    : order.status === \"Отменен\"\r\n    ? (color.color = \"#b50000\")\r\n    : null;\r\n\r\n  let day = \"\";\r\n  const now = new Date();\r\n  const today = now.setHours(23, 59, 59, 999).valueOf();\r\n\r\n  const otherDay = new Date(order.createdAt);\r\n  const other = otherDay.valueOf();\r\n\r\n  const num = Math.floor((today - other) / 86400000);\r\n  if (num <= 1) {\r\n    day =\r\n      \"Сегодня, \" +\r\n      otherDay.getHours() +\r\n      \":\" +\r\n      otherDay.getMinutes() +\r\n      \" i-GMT+\" +\r\n      -now.getTimezoneOffset() / 60;\r\n  } else if (num <= 2) {\r\n    day =\r\n      \"Вчера, \" +\r\n      otherDay.getHours() +\r\n      \":\" +\r\n      otherDay.getMinutes() +\r\n      \" i-GMT+\" +\r\n      -now.getTimezoneOffset() / 60;\r\n  } else if (num <= 3) {\r\n    day =\r\n      \"Позавчера, \" +\r\n      otherDay.getHours() +\r\n      \":\" +\r\n      otherDay.getMinutes() +\r\n      \" i-GMT+\" +\r\n      -now.getTimezoneOffset() / 60;\r\n  } else {\r\n    if (num <= 4 || (num % 10 >= 1 && num % 10 <= 1)) {\r\n      day =\r\n        `${num} дня назад, ` +\r\n        otherDay.getHours() +\r\n        \":\" +\r\n        otherDay.getMinutes() +\r\n        \" i-GMT+\" +\r\n        -now.getTimezoneOffset() / 60;\r\n    } else {\r\n      day =\r\n        `${num} дней назад, ` +\r\n        otherDay.getHours() +\r\n        \":\" +\r\n        otherDay.getMinutes() +\r\n        \" i-GMT+\" +\r\n        -now.getTimezoneOffset() / 60;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <li className={`${styles.listItem}`} onClick={() => onClick(order)}>\r\n      <Link\r\n        to={{\r\n          pathname: `${url}/${order._id}`,\r\n          state: { background: location },\r\n        }}\r\n        className={styles.link}\r\n      >\r\n        <div className={styles.identification}>\r\n          <p className=\"text text_type_digits-default\">{`#${order.number}`}</p>\r\n          <p className={`${styles.textDate} text text_type_main-small`}>\r\n            {`${day}`}\r\n          </p>\r\n        </div>\r\n        <h2 className=\"text text_type_main-medium mt-6\">{order.name}</h2>\r\n        {type === \"profile\" && (\r\n          <p className=\"mt-2 mb-0\" style={color}>\r\n            {order.status}\r\n          </p>\r\n        )}\r\n        <div className={`${styles.identification} mt-6`}>\r\n          <ul className={styles.imageContainer}>\r\n            {order.ingredients.map((id, index) => {\r\n              const dataCard = cards.find((card: Ingredient) => card._id === id);\r\n              if (index === 6) {\r\n                const styleModal = {\r\n                  left: -147,\r\n                  zIndex: 550,\r\n                };\r\n                return (\r\n                  <li\r\n                    key={index}\r\n                    style={styleModal}\r\n                    className={`${styles.image} ${styles.modal}`}\r\n                  >\r\n                    <p\r\n                      className={`${styles.modalText} text text_type_main-small`}\r\n                    >{`+${number}`}</p>\r\n                  </li>\r\n                );\r\n              }\r\n              if (dataCard && index < 6) {\r\n                const left = index * -16;\r\n                const zindex = (10 - index) * 100;\r\n                const container = {\r\n                  zIndex: zindex,\r\n                  left: left,\r\n                };\r\n                return (\r\n                  <li\r\n                    key={index}\r\n                    style={container}\r\n                    className={`${styles.image}`}\r\n                  >\r\n                    <img src={`${dataCard.image_mobile}`} alt=\"\" />\r\n                  </li>\r\n                );\r\n              }\r\n            })}\r\n          </ul>\r\n          <p className={`${styles.priceItem}`}>\r\n            <span className={`mr-2 text_type_digits-default`}>{sum}</span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </p>\r\n        </div>\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport function OrderLine(\r\n  props: { orders: Array<IOrder>, type: string, onClick: (order: IOrder) => void }\r\n) {\r\n  const { orders, type, onClick } = props;\r\n  const dataCards = useSelector((store) => {\r\n    return store.ingredient.baseIngredients;\r\n  });\r\n  const width = {\r\n    width: 600,\r\n  };\r\n  if (type === \"profile\") {\r\n    width.width = 860;\r\n  }\r\n\r\n  return (\r\n    <main className={styles.main}>\r\n      <ul className={styles.list} style={width}>\r\n        {orders &&\r\n          orders.map((order, index) => {\r\n            return (\r\n              <OrderItem\r\n                order={order}\r\n                key={index}\r\n                cards={dataCards}\r\n                type={type}\r\n                onClick={onClick}\r\n              />\r\n            );\r\n          })}\r\n      </ul>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport function OrderList(props: {onClick: (order: IOrder) => void}) {\r\n  const { onClick } = props;\r\n  const list = useSelector((store) => {\r\n    if (store.order) {\r\n      return store.order[\"messages\"];\r\n    }\r\n  });\r\n\r\n  let data: Array<IOrder> = [];\r\n  if (list) {\r\n   data = list.orders;\r\n  } \r\n  return (\r\n    <section className={`${styles.section} mr-15`}>\r\n      <h1 className={`text text_type_main-large mb-5`}>Лента заказов</h1>\r\n      <OrderLine orders={data} type=\"line\" onClick={onClick} />\r\n    </section>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { OrderLine } from \"../../components/order-list/order-list\";\r\nimport { getCookie } from '../../services/utils';\r\nimport { WS_CONNECTION_CLOSED } from '../../services/action-types';\r\nimport { WS_CONNECTION_START } from '../../services/action-types/wsActionTypes';\r\nimport styles from \"../index.module.css\";\r\nimport { IOrder } from '../../utils/types';\r\n\r\nexport function OrdersPage(props: {onClick: (order: IOrder) => void}) {\r\n  const { onClick } = props;\r\n  const dispatch = useDispatch();\r\n  const list = useSelector((store) => {\r\n    if (store.order) {\r\n      return store.order[\"messages\"];\r\n    }\r\n  });\r\n  console.log(list)\r\n  const state = useSelector((store) => {\r\n    return store.user\r\n  });\r\n\r\n  useEffect(\r\n    () => {\r\n      const token = '?token=' + getCookie('token');\r\n      if (state.user.name) {\r\n        dispatch({ type: WS_CONNECTION_START, payload: token });\r\n      }\r\n\r\n      return () => {\r\n        dispatch({ type: WS_CONNECTION_CLOSED, payload: '' });\r\n      }\r\n    },\r\n    [state.user.name]\r\n  );\r\n\r\n  return (\r\n    <section className={`${styles.section}`}>\r\n      {list && \r\n        <OrderLine orders={list.orders} type=\"profile\" onClick={onClick} />\r\n      }\r\n      \r\n    </section>\r\n  );\r\n}\r\n","import React, { useEffect, useCallback, useRef } from \"react\";\r\nimport {\r\n  ConstructorElement,\r\n  Button,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport styles from \"./order-info.module.css\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { IOrder } from \"../../utils/types\";\r\n\r\nexport function OrderInfo() {\r\n  const list = useSelector((store) => {\r\n    if (store.order) {\r\n      return store.order[\"messages\"];\r\n    }\r\n  });\r\n  let orders: Array<IOrder> = [];\r\n  if (list) {\r\n    orders = list.orders;\r\n  }\r\n\r\n  return (\r\n    <section className={`${styles.container} pt-15`}>\r\n      <div className={`${styles.ordersContainer} mb-15`}>\r\n        <div className={styles.listNumber}>\r\n          <h2 className={`${styles.title} text text_type_main-medium mb-6`}>\r\n            Готовы:\r\n          </h2>\r\n          <ul className={`${styles.list} ${styles.listFinal}`}>\r\n            {orders &&\r\n              orders.map((order, index) => {\r\n                if (order.status === \"done\") {\r\n                  return (\r\n                    <li\r\n                      className=\"text text_type_digits-default mr-3\"\r\n                      key={uuidv4()}\r\n                    >\r\n                      {order.number}\r\n                    </li>\r\n                  );\r\n                }\r\n              })}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.listNumber}>\r\n          <h2 className={`${styles.title} text text_type_main-medium mb-6`}>\r\n            В работе:\r\n          </h2>\r\n          <ul className={`${styles.list} ${styles.listWork}`}>\r\n            {orders &&\r\n              orders.map((order, index) => {\r\n                if (order.status !== \"done\") {\r\n                  return (\r\n                    <li\r\n                      className=\"text text_type_digits-default\"\r\n                      key={uuidv4()}\r\n                    >\r\n                      {order.number}\r\n                    </li>\r\n                  );\r\n                }\r\n              })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className=\"mb-15\">\r\n        <h2 className={`${styles.title} text text_type_main-medium`}>\r\n          Выполнено за все время:\r\n        </h2>\r\n        {list && <p className=\"text text_type_digits-large\">{list.total}</p>}\r\n      </div>\r\n      <div>\r\n        <h2 className={`${styles.title} text text_type_main-medium`}>\r\n          Выполнено за сегодня:\r\n        </h2>\r\n        {list && (\r\n          <p className=\"text text_type_digits-large\">{list.totalToday}</p>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch } from \"../services/hooks\";\r\nimport styles from \"./index.module.css\";\r\nimport { OrderList } from \"../components/order-list/order-list\";\r\nimport { OrderInfo } from \"../components/order-info/order-info\";\r\nimport { IOrder } from '../utils/types';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from \"../services/action-types\";\r\n\r\nexport function FeedPage(props: {onClick: (order: IOrder) => void}) {\r\n  const { onClick } = props;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: '/all' });\r\n\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED, payload: '' });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <main className={styles.main}>\r\n      <OrderList onClick={onClick} />\r\n      <OrderInfo />\r\n    </main>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport styleMain from './app.module.css';\r\nimport AppHeader from '../app-header/app-header';\r\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\r\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\r\nimport Modal from '../modal/modal';\r\nimport ModalOrder from '../modal-order/modal-order';\r\nimport Order from '../order/order';\r\nimport OrderPage from '../order/order-page';\r\nimport OrderDetails from '../order-details/order-details';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\nimport IngredientDetailsPage from '../ingredient-details/ingredient-details-page';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { VIEWED_INGREDIENT, VIEWED_ORDER } from '../../services/actions/index';\r\nimport { MODAL_VISIBLE, CLOSE_MODAL } from '../../services/actions/actions';\r\nimport { sendOrder } from '../../services/actions/actions';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Redirect, Switch, Route, Router } from 'react-router-dom';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { ProtectedRoute } from '../protected-routh';\r\nimport { getItems } from '../../services/actions/index';\r\nimport { LoginPage, FeedPage, RegisterPage, ForgotPasswordPage, ResetPasswordPage, ProfilePage, NotFound404 } from '../../pages';\r\nimport { ILocation, IBackground, IOrder, Ingredient } from '../../utils/types'; \r\n\r\nfunction App() {\r\n\r\n  const dispatch = useDispatch();\r\n  const [currentIngredient, setCurrentIngredient] = useState({\r\n    isIngredient: false,\r\n  });\r\n\r\n  const { viewIngredient, modalVisible, numOrder } = useSelector((store) => {\r\n    return store.ingredient\r\n  });\r\n  const state = useSelector((store) => {\r\n    return store.user\r\n  });\r\n  const location:ILocation = useLocation();\r\n  const background:IBackground = location.state && location.state.background;\r\n  const history = useHistory();\r\n\r\n  const openModalIngredients = (card: Ingredient) => {\r\n    dispatch({\r\n      type: VIEWED_INGREDIENT,\r\n      payload: card\r\n    })\r\n    setCurrentIngredient({...currentIngredient, isIngredient: true});\r\n    dispatch({\r\n      type: MODAL_VISIBLE\r\n    });\r\n  }\r\n\r\n  const openModalOrder = (order: IOrder) => {\r\n    \r\n    dispatch({\r\n      type: VIEWED_ORDER,\r\n      payload: order\r\n    })\r\n    setCurrentIngredient({...currentIngredient, isIngredient: true});\r\n    dispatch({\r\n      type: MODAL_VISIBLE\r\n    });\r\n  }\r\n\r\n  const openModal = (selectCards:Array<Ingredient>) => {\r\n    if (state.user.name) {\r\n      return dispatch(sendOrder(selectCards))\r\n    } else {\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    dispatch({\r\n      type: CLOSE_MODAL\r\n    });\r\n    setCurrentIngredient({...currentIngredient, isIngredient: false});\r\n    dispatch({\r\n      type: VIEWED_INGREDIENT,\r\n      payload: {}\r\n    });\r\n    if (background) {\r\n      history.push(background.pathname);\r\n    } else {\r\n      history.push(\"/\");\r\n    }\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(getItems());\r\n  }, [dispatch]);\r\n  \r\n  const modalOrder = (\r\n    <Modal onClose={handleCloseModal} title=''> \r\n      <OrderDetails numOrder = {numOrder}/>\r\n    </Modal>\r\n);\r\n\r\n  return (\r\n    <>\r\n        <AppHeader />\r\n        <Switch location={background || location}>\r\n          <Route path=\"/\" exact={true}>\r\n            <DndProvider backend={HTML5Backend}>\r\n              <main className={styleMain.main}>\r\n                <BurgerIngredients onClick={openModalIngredients}/>\r\n                <BurgerConstructor \r\n                onClick={openModal} \r\n                />\r\n              </main>\r\n            </DndProvider>\r\n          </Route>\r\n          <Route path=\"/feed\" exact={true}>\r\n            <FeedPage onClick={openModalOrder} />\r\n          </Route>\r\n          <Route path=\"/login\" exact={true}>\r\n            <LoginPage />\r\n          </Route>\r\n          <Route path=\"/register\" exact={true}>\r\n            <RegisterPage />\r\n          </Route>\r\n          <Route path=\"/forgot-password\" exact={true}>\r\n            <ForgotPasswordPage />\r\n          </Route>\r\n          <Route path=\"/reset-password\" exact={true}>\r\n            <ResetPasswordPage />\r\n          </Route>\r\n          <ProtectedRoute path=\"/profile\" exact={true}>\r\n            <ProfilePage onClick={openModalOrder}/>\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/profile/orders\" exact={true}>\r\n            <ProfilePage onClick={openModalOrder}/>\r\n          </ProtectedRoute>\r\n          <Route path={`/ingredients/:id`} exact={true}>\r\n            <IngredientDetailsPage\r\n              title={'Детали ингредиента'} \r\n              onClose={handleCloseModal}\r\n            />\r\n          </Route>\r\n          <Route path={`/feed/:id`} exact={true}>\r\n              <OrderPage\r\n                title={''}\r\n                onClose={handleCloseModal}\r\n              />\r\n          </Route>\r\n          <ProtectedRoute path={`/profile/orders/:id`} exact={true}>\r\n              <OrderPage\r\n                title={''}\r\n                onClose={handleCloseModal}\r\n              />\r\n          </ProtectedRoute>\r\n          <Route>\r\n            <NotFound404 />\r\n          </Route>\r\n        </Switch>\r\n      {background && \r\n        <Switch>\r\n          <Route\r\n            path=\"/ingredients/:id\">\r\n              <Modal onClose={handleCloseModal} title={'Детали ингредиента'}> \r\n                <IngredientDetails \r\n                  title={'Детали ингредиента'}\r\n                  onClose={handleCloseModal}\r\n                />\r\n              </Modal>\r\n          </Route>\r\n          <Route path=\"/feed/:id\">\r\n            <ModalOrder onClose={handleCloseModal} title={'Детали ингредиента'}>\r\n              <Order\r\n                title={'Детали ингредиента'}\r\n                onClose={handleCloseModal}\r\n              />\r\n            </ModalOrder>\r\n          </Route>\r\n          <Route path=\"/profile/orders/:id\">\r\n            <ModalOrder onClose={handleCloseModal} >\r\n              <Order\r\n                title={'Детали ингредиента'}\r\n                onClose={handleCloseModal}\r\n              />\r\n            </ModalOrder>\r\n          </Route>\r\n        </Switch>\r\n      }\r\n      {modalVisible && \r\n      !currentIngredient.isIngredient && \r\n      modalOrder}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { PRICE, VIEWED_INGREDIENT, GET_ITEMS_SUCCESS,\r\n  GET_ITEMS_REQUEST, GET_ITEMS_FAILED, VIEWED_ORDER } from '../actions/index';\r\nimport { \r\n    ADD_ITEM, \r\n    DELETE_ITEM, \r\n    REPLACE_ITEM, \r\n    MOVE_CARD, \r\n    CLEAR_INGREDIENTS, \r\n    MODAL_VISIBLE, \r\n    SET_ORDER,\r\n    CLOSE_MODAL \r\n  } from '../actions/actions';\r\nimport { Ingredient, IOrder } from '../../utils/types';\r\nimport type { TCardsActions } from '../actions/index';\r\nimport type { TCostructorActions } from '../actions/actions';\r\n\r\n  type TInitialState = {\r\n    baseIngredients: Array<Ingredient>,\r\n    selectedIngredients: Array<Ingredient>,\r\n    viewIngredient: Ingredient,\r\n    viewOrder: IOrder,\r\n    isLoading: boolean,\r\n    isError: string,\r\n    order: IOrder,\r\n    price: number,\r\n    numOrder: number,\r\n    modalVisible: boolean\r\n  }\r\n\r\nconst initialState: TInitialState = {\r\n  baseIngredients: [],\r\n  selectedIngredients: [],\r\n  viewIngredient: {\r\n    calories: 0,\r\n    carbohydrates: 0,\r\n    fat: 0,\r\n    image: '',\r\n    image_large: '',\r\n    image_mobile: '',\r\n    name: '',\r\n    price: 0,\r\n    proteins: 0,\r\n    type: '',\r\n    __v: 0,\r\n    _id: '',\r\n    uuid: ''\r\n  },\r\n  viewOrder: {\r\n    createdAt: '',\r\n    ingredients: [''],\r\n    name: '',\r\n    number: 0,\r\n    status: '',\r\n    updatedAt: '',\r\n    _id: ''\r\n  },\r\n  isLoading: false,\r\n  isError: '',\r\n  order: {\r\n    createdAt: '',\r\n    ingredients: [''],\r\n    name: '',\r\n    number: 0,\r\n    status: '',\r\n    updatedAt: '',\r\n    _id: ''\r\n  },\r\n  price: 0,\r\n  numOrder: 0,\r\n  modalVisible: false\r\n};\r\n\r\nexport const ingredientReducer = (state = initialState, action: TCardsActions | TCostructorActions): TInitialState => { \r\n  switch (action.type) {\r\n    case GET_ITEMS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        baseIngredients: action.data,\r\n        isLoading: false,\r\n        isError: '',\r\n      };\r\n    }\r\n    case PRICE: {\r\n      return {\r\n        ...state,\r\n        price: action.payload\r\n      };\r\n    }\r\n    case VIEWED_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        viewIngredient: action.payload\r\n      };\r\n    }\r\n    case GET_ITEMS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      };\r\n    }\r\n    case GET_ITEMS_FAILED: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        isError: action.payload\r\n      };\r\n    }\r\n    case ADD_ITEM: {\r\n      const item = {...action.payload.card, uuid: action.payload.uuid};\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients, item]\r\n      };\r\n    }\r\n    case REPLACE_ITEM: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients.filter(element => element['type'] !== 'bun'), ...action.payload]\r\n      };\r\n    }\r\n    case DELETE_ITEM: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: action.payload\r\n      };\r\n    }\r\n    case MOVE_CARD: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: action.payload\r\n      };\r\n    }\r\n    case CLEAR_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: []\r\n      };\r\n    }\r\n    case MODAL_VISIBLE: {\r\n      return {\r\n        ...state,\r\n        modalVisible: !state.modalVisible\r\n      };\r\n    }\r\n    case SET_ORDER: {\r\n      return {\r\n        ...state,\r\n        numOrder: action.payload\r\n      };\r\n    }\r\n    case CLOSE_MODAL: {\r\n      return {\r\n        ...state,\r\n        modalVisible: false\r\n      };\r\n    }\r\n      case VIEWED_ORDER: {\r\n        return {\r\n          ...state,\r\n          viewOrder: action.payload\r\n        };\r\n      };\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import { GET_USER_SUCCESS, UPDATE_USER_SUCCESS, LOGOUT_USER } from '../actions/user-actions';\r\nimport type { TUserActions } from '../actions/user-actions';\r\n\r\n\r\ntype TUserState = {\r\n  user: {\r\n    email: string,\r\n    name: string,\r\n    password: string\r\n  }\r\n}\r\n\r\nconst userState: TUserState = {\r\n  user: {\r\n    email: '',\r\n    name: '',\r\n    password: ''\r\n  }\r\n};\r\n\r\nexport const userReducer = (state = userState, action: TUserActions):TUserState  => { \r\n  switch (action.type) {\r\n    case GET_USER_SUCCESS: {\r\n      const { email, name, password } = action.payload;\r\n      return {\r\n        ...state,\r\n        user: {...state.user,\r\n          email: email,\r\n          name: name,\r\n          password: password\r\n        }\r\n      };\r\n    }\r\n    case UPDATE_USER_SUCCESS: {\r\n      const { email, name, password } = action.payload;\r\n      return {\r\n        ...state,\r\n        user: {...state.user,\r\n          email: email,\r\n          name: name,\r\n          password: password\r\n        }\r\n      };\r\n    }\r\n    case LOGOUT_USER: {\r\n      return {\r\n        ...state,\r\n        user: {...state.user,\r\n          email: '',\r\n          name: '',\r\n          password: ''\r\n        }\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import { IOrder } from \"../../utils/types\";\r\nimport {\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE\r\n} from \"../action-types\";\r\nimport type { TConnectionActions } from '../action-types/wsActionTypes';\r\n\r\ntype TInitialStateOrder = {\r\n  wsConnected: boolean,\r\n  messages: {\r\n    orders: Array<IOrder>,\r\n    success: boolean,\r\n    total: number,\r\n    totalToday: number\r\n  }\r\n  error: boolean | undefined\r\n}\r\n\r\nconst initialState: TInitialStateOrder = {\r\n  wsConnected: false,\r\n  messages: {\r\n    orders: [],\r\n    success: false,\r\n    total: 0,\r\n    totalToday: 0\r\n  },\r\n  error: undefined,\r\n};\r\n\r\nexport const wsReducer = (state = initialState, action: TConnectionActions):TInitialStateOrder => {\r\n  // console.log(action.payload);\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n                error: undefined,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n                error: undefined,\r\n        messages: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { ingredientReducer } from './reducers';\r\nimport { userReducer } from './user-redusers';\r\nimport { wsReducer } from './wsReducer';\r\nimport { store } from '../store';\r\n\r\n\r\n\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredient: ingredientReducer, \r\n  user: userReducer,\r\n  order: wsReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\n","import { compose, createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { rootReducer } from \"./reducers/index\";\r\nimport { socketMiddleware } from \"./middleware\";\r\nimport {\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_GET_MESSAGE,\r\n  WS_SEND_MESSAGE,\r\n} from \"./action-types\";\r\n\r\nconst wsActions = {\r\n  wsInit: WS_CONNECTION_START,\r\n  wsSendMessage: WS_SEND_MESSAGE,\r\n  onOpen: WS_CONNECTION_SUCCESS,\r\n  onClose: WS_CONNECTION_CLOSED,\r\n  onError: WS_CONNECTION_ERROR,\r\n  onMessage: WS_GET_MESSAGE,\r\n};\r\n\r\nconst wsUrl = 'wss://norma.nomoreparties.space/orders';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(thunk, socketMiddleware(wsUrl, wsActions))\r\n);\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import type { Middleware, MiddlewareAPI } from 'redux';\r\nimport { RootState } from '../reducers';\r\nimport { getCookie } from '../utils';\r\nimport { TConnectionActions, TWSActions } from '../action-types/wsActionTypes'\r\n\r\nexport const socketMiddleware = (wsUrl:string, wsActions:TWSActions):Middleware => {\r\n  return (store) => {\r\n  let socket: WebSocket | null = null;\r\n  return (next) => (action) => {\r\n    const { dispatch, getState } = store;\r\n    const { type, payload } = action;\r\n    const { user } = getState().user;\r\n    const { wsInit, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\r\n\r\n    if (type === wsInit) {\r\n      socket = new WebSocket(`${wsUrl}${payload}`);\r\n    }  \r\n\r\n    if (socket && type === onClose) {\r\n      socket.close(1000);\r\n    }  \r\n\r\n\r\nif (socket) {\r\n        socket.onopen = (event:Event) => {\r\n         \r\n          dispatch({ type: onOpen, payload: event });\r\n        };\r\n\r\n        socket.onerror = (event:Event) => {\r\n          dispatch({ type: onError, payload: event });\r\n        };\r\n\r\n        socket.onmessage = (event:MessageEvent) => {\r\n          const { data } = event;\r\n          dispatch({ type: onMessage, payload: JSON.parse(data) });\r\n        };\r\n\r\n        socket.onclose = (event:Event) => {\r\n          dispatch({ type: onClose, payload: event });\r\n        };\r\n\r\n        if (type === wsSendMessage) {\r\n          const message = payload;\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n          next(action);\r\n        };\r\n        };\r\n      };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './services/store';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { ProvideAuth } from './services/auth';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <ProvideAuth>\r\n            <App />\r\n        </ProvideAuth>\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-info_container__1TRAN\",\"ordersContainer\":\"order-info_ordersContainer__2RoQ8\",\"listNumber\":\"order-info_listNumber__r4z-i\",\"list\":\"order-info_list__wNkUf\",\"listFinal\":\"order-info_listFinal__2Jm07\",\"title\":\"order-info_title__14oMa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"burger-constructor_order__3rMIN\",\"list_onlocked\":\"burger-constructor_list_onlocked__1CxsT\",\"list_locked\":\"burger-constructor_list_locked__2Y3nt\",\"list_item\":\"burger-constructor_list_item__1-kH-\",\"accept_block\":\"burger-constructor_accept_block__1wV1I\",\"sum_block\":\"burger-constructor_sum_block__2E3EV\",\"icon\":\"burger-constructor_icon__1iENk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"numberOrder\":\"order-details_numberOrder__oLFlI\",\"icon\":\"order-details_icon__tXwr0\",\"bottomText\":\"order-details_bottomText__1EjZh\",\"text\":\"order-details_text__1p_Eq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1I6s8\",\"header\":\"modal_header__2Qw2O\",\"buttonClose\":\"modal_buttonClose__3x02_\",\"contentContainer\":\"modal_contentContainer__3azVf\",\"modal_container\":\"modal_modal_container__Z2Swl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonClose\":\"modal-order_buttonClose__1q3-p\",\"modal_container\":\"modal-order_modal_container__f2NbL\",\"modal\":\"modal-order_modal__2Lrws\",\"header\":\"modal-order_header__33k11\"};"],"sourceRoot":""}